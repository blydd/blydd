<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/4/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-代码中有意思注释" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/12/04/%E4%BB%A3%E7%A0%81%E4%B8%AD%E6%9C%89%E6%84%8F%E6%80%9D%E6%B3%A8%E9%87%8A/" class="article-date">
  <time class="dt-published" datetime="2020-12-04T02:10:17.000Z" itemprop="datePublished">2020-12-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%85%B6%E4%BB%96/">其他</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/12/04/%E4%BB%A3%E7%A0%81%E4%B8%AD%E6%9C%89%E6%84%8F%E6%80%9D%E6%B3%A8%E9%87%8A/">代码中有意思注释</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="string">&quot;/***\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *                    .::::.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *                  .::::::::.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *                 :::::::::::  \n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *             ..:::::::::::&#x27;\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *           &#x27;::::::::::::&#x27;\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *             .::::::::::\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *        &#x27;::::::::::::::..\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *             ..::::::::::::.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *           ``::::::::::::::::\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *            ::::``:::::::::&#x27;        .:::.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *           ::::&#x27;   &#x27;:::::&#x27;       .::::::::.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *         .::::&#x27;      ::::     .:::::::&#x27;::::.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *        .:::&#x27;       :::::  .:::::::::&#x27; &#x27;:::::.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *       .::&#x27;        :::::.:::::::::&#x27;      &#x27;:::::.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *      .::&#x27;         ::::::::::::::&#x27;         ``::::.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *  ...:::           ::::::::::::&#x27;              ``::.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * ```` &#x27;:.          &#x27;:::::::::&#x27;                  ::::..\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *                    &#x27;.:::::&#x27;                    &#x27;:&#x27;````..\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; */&quot;</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;/***\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * ┌───┐   ┌───┬───┬───┬───┐ ┌───┬───┬───┬───┐ ┌───┬───┬───┬───┐ ┌───┬───┬───┐\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * │Esc│   │ F1│ F2│ F3│ F4│ │ F5│ F6│ F7│ F8│ │ F9│F10│F11│F12│ │P/S│S L│P/B│  ┌┐    ┌┐    ┌┐\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * └───┘   └───┴───┴───┴───┘ └───┴───┴───┴───┘ └───┴───┴───┴───┘ └───┴───┴───┘  └┘    └┘    └┘\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * ┌───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───────┐ ┌───┬───┬───┐ ┌───┬───┬───┬───┐\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * │~ `│! 1│@ 2│# 3│$ 4│% 5│^ 6│&amp; 7│* 8│( 9│) 0│_ -│+ =│ BacSp │ │Ins│Hom│PUp│ │N L│ / │ * │ - │\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * ├───┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─────┤ ├───┼───┼───┤ ├───┼───┼───┼───┤\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * │ Tab │ Q │ W │ E │ R │ T │ Y │ U │ I │ O │ P │&#123; [│&#125; ]│ | \\ │ │Del│End│PDn│ │ 7 │ 8 │ 9 │   │\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * ├─────┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴─────┤ └───┴───┴───┘ ├───┼───┼───┤ + │\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * │ Caps │ A │ S │ D │ F │ G │ H │ J │ K │ L │: ;│\&quot; &#x27;│ Enter  │               │ 4 │ 5 │ 6 │   │\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * ├──────┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴────────┤     ┌───┐     ├───┼───┼───┼───┤\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * │ Shift  │ Z │ X │ C │ V │ B │ N │ M │&lt; ,│&gt; .│? /│  Shift   │     │ ↑ │     │ 1 │ 2 │ 3 │   │\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * ├─────┬──┴─┬─┴──┬┴───┴───┴───┴───┴───┴──┬┴───┼───┴┬────┬────┤ ┌───┼───┼───┐ ├───┴───┼───┤ E││\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * │ Ctrl│    │Alt │         Space         │ Alt│    │    │Ctrl│ │ ← │ ↓ │ → │ │   0   │ . │←─┘│\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * └─────┴────┴────┴───────────────────────┴────┴────┴────┴────┘ └───┴───┴───┘ └───────┴───┴───┘\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; */&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;/***\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *                    _ooOoo_\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *                   o8888888o\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *                   88\&quot; . \&quot;88\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *                   (| -_- |)\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *                    O\\ = /O\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *                ____/`---&#x27;\\____\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *              .   &#x27; \\\\| |// `.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *               / \\\\||| : |||// \\\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *             / _||||| -:- |||||- \\\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *               | | \\\\\\ - /// | |\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *             | \\_| &#x27;&#x27;\\---/&#x27;&#x27; | |\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *              \\ .-\\__ `-` ___/-. /\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *           ___`. .&#x27; /--.--\\ `. . __\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *        .\&quot;\&quot; &#x27;&lt; `.___\\_&lt;|&gt;_/___.&#x27; &gt;&#x27;\&quot;\&quot;.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *       | | : `- \\`.;`\\ _ /`;.`/ - ` : | |\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *         \\ \\ `-. \\_ __\\ /__ _/ .-` / /\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * ======`-.____`-.___\\_____/___.-`____.-&#x27;======\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *                    `=---=&#x27;\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * .............................................\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; */&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;/***\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *      ┌─┐       ┌─┐\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *   ┌──┘ ┴───────┘ ┴──┐\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *   │                 │\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *   │       ───       │\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *   │  ─┬┘       └┬─  │\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *   │                 │\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *   │       ─┴─       │\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *   │                 │\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *   └───┐         ┌───┘\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *       │         │\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *       │         │\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *       │         │\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *       │         └──────────────┐\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *       │                        │\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *       │                        ├─┐\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *       │                        ┌─┘\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *       │                        │\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *       └─┐  ┐  ┌───────┬──┐  ┌──┘\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *         │ ─┤ ─┤       │ ─┤ ─┤\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *         └──┴──┘       └──┴──┘\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *                神兽保佑\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *               代码无BUG!\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; */&quot;</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;/***\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *_______________#########_______________________\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *______________############_____________________\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *______________#############____________________\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *_____________##__###########___________________\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *____________###__######_#####__________________\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *____________###_#######___####_________________\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *___________###__##########_####________________\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *__________####__###########_####_______________\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *________#####___###########__#####_____________\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *_______######___###_########___#####___________\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *_______#####___###___########___######_________\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *______######___###__###########___######_______\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *_____######___####_##############__######______\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *____#######__#####################_#######_____\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *____#######__##############################____\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *___#######__######_#################_#######___\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *___#######__######_######_#########___######___\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *___#######____##__######___######_____######___\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *___#######________######____#####_____#####____\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *____######________#####_____#####_____####_____\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *_____#####________####______#####_____###______\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *______#####______;###________###______#________\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *________##_______####________####______________\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; */&quot;</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;                              _(\\_/) \n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;                             ,((((^`\\\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;                            ((((  (6 \\ \n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;                          ,((((( ,    \\\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;      ,,,_              ,(((((  /\&quot;._  ,`,\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;     ((((\\\\ ,...       ,((((   /    `-.-&#x27;\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;     )))  ;&#x27;    `\&quot;&#x27;\&quot;&#x27;\&quot;\&quot;((((   (      \n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;    (((  /            (((      \\\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;     )) |                      |\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;    ((  |        .       &#x27;     |\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;    ))  \\     _ &#x27;      `t   ,.&#x27;)\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;    (   |   y;- -,-\&quot;\&quot;&#x27;\&quot;-.\\   \\/  \n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;    )   / ./  ) /         `\\  \\\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;       |./   ( (           / /&#x27;\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;       ||     \\\\          //&#x27;|\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;       ||      \\\\       _//&#x27;||\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;       ||       ))     |_/  ||\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;       \\_\\     |_/          ||\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;       `&#x27;\&quot;                  \\_\\\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;                            `&#x27;\&quot; &quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;/***\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *          .,:,,,                                        .::,,,::.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *        .::::,,;;,                                  .,;;:,,....:i:\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *        :i,.::::,;i:.      ....,,:::::::::,....   .;i:,.  ......;i.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *        :;..:::;::::i;,,:::;:,,,,,,,,,,..,.,,:::iri:. .,:irsr:,.;i.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *        ;;..,::::;;;;ri,,,.                    ..,,:;s1s1ssrr;,.;r,\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *        :;. ,::;ii;:,     . ...................     .;iirri;;;,,;i,\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *        ,i. .;ri:.   ... ............................  .,,:;:,,,;i:\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *        :s,.;r:... ....................................... .::;::s;\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *        ,1r::. .............,,,.,,:,,........................,;iir;\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *        ,s;...........     ..::.,;:,,.          ...............,;1s\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *       :i,..,.              .,:,,::,.          .......... .......;1,\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *      ir,....:rrssr;:,       ,,.,::.     .r5S9989398G95hr;. ....,.:s,\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *     ;r,..,s9855513XHAG3i   .,,,,,,,.  ,S931,.,,.;s;s&amp;BHHA8s.,..,..:r:\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *    :r;..rGGh,  :SAG;;G@BS:.,,,,,,,,,.r83:      hHH1sXMBHHHM3..,,,,.ir.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *   ,si,.1GS,   sBMAAX&amp;MBMB5,,,,,,:,,.:&amp;8       3@HXHBMBHBBH#X,.,,,,,,rr\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *   ;1:,,SH:   .A@&amp;&amp;B#&amp;8H#BS,,,,,,,,,.,5XS,     3@MHABM&amp;59M#As..,,,,:,is,\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *  .rr,,,;9&amp;1   hBHHBB&amp;8AMGr,,,,,,,,,,,:h&amp;&amp;9s;   r9&amp;BMHBHMB9:  . .,,,,;ri.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *  :1:....:5&amp;XSi;r8BMBHHA9r:,......,,,,:ii19GG88899XHHH&amp;GSr.      ...,:rs.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *  ;s.     .:sS8G8GG889hi.        ....,,:;:,.:irssrriii:,.        ...,,i1,\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *  ;1,         ..,....,,isssi;,        .,,.                      ....,.i1,\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *  ;h:               i9HHBMBBHAX9:         .                     ...,,,rs,\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *  ,1i..            :A#MBBBBMHB##s                             ....,,,;si.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *  .r1,..        ,..;3BMBBBHBB#Bh.     ..                    ....,,,,,i1;\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *   :h;..       .,..;,1XBMMMMBXs,.,, .. :: ,.               ....,,,,,,ss.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *    ih: ..    .;;;, ;;:s58A3i,..    ,. ,.:,,.             ...,,,,,:,s1,\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *    .s1,....   .,;sh,  ,iSAXs;.    ,.  ,,.i85            ...,,,,,,:i1;\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *     .rh: ...     rXG9XBBM#M#MHAX3hss13&amp;&amp;HHXr         .....,,,,,,,ih;\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *      .s5: .....    i598X&amp;&amp;A&amp;AAAAAA&amp;XG851r:       ........,,,,:,,sh;\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *      . ihr, ...  .         ..                    ........,,,,,;11:.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *         ,s1i. ...  ..,,,..,,,.,,.,,.,..       ........,,.,,.;s5i.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *          .:s1r,......................       ..............;shs,\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *          . .:shr:.  ....                 ..............,ishs.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *              .,issr;,... ...........................,is1s;.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *                 .,is1si;:,....................,:;ir1sr;,\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *                    ..:isssssrrii;::::::;;iirsssssr;:..\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *                         .,::iiirsssssssssrri;;:.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; */&quot;</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;/***\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *  .--,       .--,\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * ( (  \\.---./  ) )\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *  &#x27;.__/o   o\\__.&#x27;\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *     &#123;=  ^  =&#125;\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *      &gt;  -  &lt;\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *     /       \\\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *    //       \\\\\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *   //|   .   |\\\\\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *   \&quot;&#x27;\\       /&#x27;\&quot;_.-~^`&#x27;-.\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *      \\  _  /--&#x27;         `\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *    ___)( )(___\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; *   (((__) (__)))    高山仰止,景行行止.虽不能至,心向往之。\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; */&quot;</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;/***\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * ░░░░░░░░░░░░░░░░░░░░░░░░▄░░\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * ░░░░░░░░░▐█░░░░░░░░░░░▄▀▒▌░\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * ░░░░░░░░▐▀▒█░░░░░░░░▄▀▒▒▒▐\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * ░░░░░░░▐▄▀▒▒▀▀▀▀▄▄▄▀▒▒▒▒▒▐\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * ░░░░░▄▄▀▒░▒▒▒▒▒▒▒▒▒█▒▒▄█▒▐\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * ░░░▄▀▒▒▒░░░▒▒▒░░░▒▒▒▀██▀▒▌\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * ░░▐▒▒▒▄▄▒▒▒▒░░░▒▒▒▒▒▒▒▀▄▒▒\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * ░░▌░░▌█▀▒▒▒▒▒▄▀█▄▒▒▒▒▒▒▒█▒▐\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * ░▐░░░▒▒▒▒▒▒▒▒▌██▀▒▒░░░▒▒▒▀▄\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * ░▌░▒▄██▄▒▒▒▒▒▒▒▒▒░░░░░░▒▒▒▒\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * ▀▒▀▐▄█▄█▌▄░▀▒▒░░░░░░░░░░▒▒▒\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; * 单身狗就这样默默地看着你，一句话也不说。\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot; */\n&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/04/%E4%BB%A3%E7%A0%81%E4%B8%AD%E6%9C%89%E6%84%8F%E6%80%9D%E6%B3%A8%E9%87%8A/" data-id="ckke5nr3r002icl8genvh5qdi" data-title="代码中有意思注释" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%B3%A8%E9%87%8A/" rel="tag">注释</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-使用Spring Boot发送邮件" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/12/04/%E4%BD%BF%E7%94%A8Spring%20Boot%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/" class="article-date">
  <time class="dt-published" datetime="2020-12-04T02:10:17.000Z" itemprop="datePublished">2020-12-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/springboot/">springboot</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/12/04/%E4%BD%BF%E7%94%A8Spring%20Boot%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/">使用springboot发送邮件</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>在项目的维护过程中，我们通常会在应用中加入短信或者邮件预警功能，比如当应用出现异常宕机时应该及时地将预警信息发送给运维或者开发人员，本文将介绍如何在Spring Boot中发送邮件。在Spring Boot中发送邮件使用的是Spring提供的org.springframework.mail.javamail.JavaMailSender，其提供了许多简单易用的方法，可发送简单的邮件、HTML格式的邮件、带附件的邮件，并且可以创建邮件模板。</p>
<h4 id="引入依赖"><a href="#引入依赖" class="headerlink" title="引入依赖"></a>引入依赖</h4><p>在Spring Boot中发送邮件，需要用到spring-boot-starter-mail，引入spring-boot-starter-mail：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>邮件配置<br>在application.yml中进行简单的配置（以163邮件为例）：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mail:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">smtp.163.com</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">你的账号</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">你的密码</span></span><br><span class="line">    <span class="attr">properties:</span></span><br><span class="line">      <span class="attr">mail:</span></span><br><span class="line">        <span class="attr">smtp:</span></span><br><span class="line">          <span class="attr">auth:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">starttls:</span></span><br><span class="line">            <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">required:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>spring.mail.username，spring.mail.password填写自己的邮箱账号密码(smtp服务的授权码)即可。</p>
<h2 id="发送简单的邮件"><a href="#发送简单的邮件" class="headerlink" title="发送简单的邮件"></a>发送简单的邮件</h2><p>编写EmailController，注入JavaMailSender:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.SimpleMailMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.javamail.JavaMailSender;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/email&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmailController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JavaMailSender jms;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.mail.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String from;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;sendSimpleEmail&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sendSimpleEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            SimpleMailMessage message = <span class="keyword">new</span> SimpleMailMessage();</span><br><span class="line">            message.setFrom(from);</span><br><span class="line">            message.setTo(<span class="string">&quot;888888@qq.com&quot;</span>); <span class="comment">// 接收地址</span></span><br><span class="line">            message.setSubject(<span class="string">&quot;一封简单的邮件&quot;</span>); <span class="comment">// 标题</span></span><br><span class="line">            message.setText(<span class="string">&quot;使用Spring Boot发送简单邮件。&quot;</span>); <span class="comment">// 内容</span></span><br><span class="line">            jms.send(message);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;发送成功&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> e.getMessage();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>启动项目访问<a target="_blank" rel="noopener" href="http://localhost/email/sendSimpleEmail%EF%BC%8C%E6%8F%90%E7%A4%BA%E5%8F%91%E9%80%81%E6%88%90%E5%8A%9F%EF%BC%9A">http://localhost/email/sendSimpleEmail，提示发送成功：</a></p>
<p><img src="http://59.110.212.214/upload/20200710_16182111.png"></p>
<h2 id="发送HTML格式的邮件"><a href="#发送HTML格式的邮件" class="headerlink" title="发送HTML格式的邮件"></a>发送HTML格式的邮件</h2><p>改造EmailController，SimpleMailMessage替换为MimeMessage：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.mail.internet.MimeMessage;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.SimpleMailMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.javamail.JavaMailSender;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.javamail.MimeMessageHelper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/email&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmailController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JavaMailSender jms;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.mail.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String from;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;sendHtmlEmail&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sendHtmlEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        MimeMessage message = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            message = jms.createMimeMessage();</span><br><span class="line">            MimeMessageHelper helper = <span class="keyword">new</span> MimeMessageHelper(message, <span class="keyword">true</span>);</span><br><span class="line">            helper.setFrom(from); </span><br><span class="line">            helper.setTo(<span class="string">&quot;888888@qq.com&quot;</span>); <span class="comment">// 接收地址</span></span><br><span class="line">            helper.setSubject(<span class="string">&quot;一封HTML格式的邮件&quot;</span>); <span class="comment">// 标题</span></span><br><span class="line">            <span class="comment">// 带HTML格式的内容</span></span><br><span class="line">            StringBuffer sb = <span class="keyword">new</span> StringBuffer(<span class="string">&quot;&lt;p style=&#x27;color:#6db33f&#x27;&gt;使用Spring Boot发送HTML格式邮件。&lt;/p&gt;&quot;</span>);</span><br><span class="line">            helper.setText(sb.toString(), <span class="keyword">true</span>);</span><br><span class="line">            jms.send(message);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;发送成功&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> e.getMessage();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>helper.setText(sb.toString(), true);中的true表示发送HTML格式邮件。启动项目，访问<a target="_blank" rel="noopener" href="http://localhost/email/sendHtmlEmail%EF%BC%8C%E6%8F%90%E7%A4%BA%E5%8F%91%E9%80%81%E6%88%90%E5%8A%9F%EF%BC%8C%E5%8F%AF%E7%9C%8B%E5%88%B0%E6%96%87%E6%9C%AC%E5%B7%B2%E7%BB%8F%E5%8A%A0%E4%B8%8A%E4%BA%86%E9%A2%9C%E8%89%B2#6db33f%EF%BC%9A">http://localhost/email/sendHtmlEmail，提示发送成功，可看到文本已经加上了颜色#6db33f：</a></p>
<p><img src="http://59.110.212.214/upload/20200710_16185725.png"></p>
<h2 id="发送带附件的邮件"><a href="#发送带附件的邮件" class="headerlink" title="发送带附件的邮件"></a>发送带附件的邮件</h2><p>发送带附件的邮件和普通邮件相比，其实就只是多了个传入附件的过程。不过使用的仍是MimeMessage：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.springboot.demo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.MimeMessage;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.io.FileSystemResource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.SimpleMailMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.javamail.JavaMailSender;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.javamail.MimeMessageHelper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/email&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmailController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JavaMailSender jms;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.mail.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String from;</span><br><span class="line">	</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;sendAttachmentsMail&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sendAttachmentsMail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        MimeMessage message = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            message = jms.createMimeMessage();</span><br><span class="line">            MimeMessageHelper helper = <span class="keyword">new</span> MimeMessageHelper(message, <span class="keyword">true</span>);</span><br><span class="line">            helper.setFrom(from); </span><br><span class="line">            helper.setTo(<span class="string">&quot;888888@qq.com&quot;</span>); <span class="comment">// 接收地址</span></span><br><span class="line">            helper.setSubject(<span class="string">&quot;一封带附件的邮件&quot;</span>); <span class="comment">// 标题</span></span><br><span class="line">            helper.setText(<span class="string">&quot;详情参见附件内容！&quot;</span>); <span class="comment">// 内容</span></span><br><span class="line">            <span class="comment">// 传入附件</span></span><br><span class="line">            FileSystemResource file = <span class="keyword">new</span> FileSystemResource(<span class="keyword">new</span> File(<span class="string">&quot;src/main/resources/static/file/项目文档.docx&quot;</span>));</span><br><span class="line">            helper.addAttachment(<span class="string">&quot;项目文档.docx&quot;</span>, file);</span><br><span class="line">            jms.send(message);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;发送成功&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> e.getMessage();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>启动项目访问<a target="_blank" rel="noopener" href="http://localhost/email/sendAttachmentsMail%EF%BC%8C%E6%8F%90%E7%A4%BA%E5%8F%91%E9%80%81%E6%88%90%E5%8A%9F%EF%BC%9A">http://localhost/email/sendAttachmentsMail，提示发送成功：</a></p>
<p><img src="http://59.110.212.214/upload/20200710_16193225.png"></p>
<h2 id="发送带静态资源的邮件"><a href="#发送带静态资源的邮件" class="headerlink" title="发送带静态资源的邮件"></a>发送带静态资源的邮件</h2><p>发送带静态资源的邮件其实就是在发送HTML邮件的基础上嵌入静态资源（比如图片），嵌入静态资源的过程和传入附件类似，唯一的区别在于需要标识资源的cid：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.springboot.demo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.MimeMessage;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.io.FileSystemResource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.SimpleMailMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.javamail.JavaMailSender;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.javamail.MimeMessageHelper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/email&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmailController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JavaMailSender jms;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.mail.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String from;</span><br><span class="line">	</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;sendInlineMail&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sendInlineMail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        MimeMessage message = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            message = jms.createMimeMessage();</span><br><span class="line">            MimeMessageHelper helper = <span class="keyword">new</span> MimeMessageHelper(message, <span class="keyword">true</span>);</span><br><span class="line">            helper.setFrom(from); </span><br><span class="line">            helper.setTo(<span class="string">&quot;888888@qq.com&quot;</span>); <span class="comment">// 接收地址</span></span><br><span class="line">            helper.setSubject(<span class="string">&quot;一封带静态资源的邮件&quot;</span>); <span class="comment">// 标题</span></span><br><span class="line">            helper.setText(<span class="string">&quot;&lt;html&gt;&lt;body&gt;博客图：&lt;img src=&#x27;cid:img&#x27;/&gt;&lt;/body&gt;&lt;/html&gt;&quot;</span>, <span class="keyword">true</span>); <span class="comment">// 内容</span></span><br><span class="line">            <span class="comment">// 传入附件</span></span><br><span class="line">            FileSystemResource file = <span class="keyword">new</span> FileSystemResource(<span class="keyword">new</span> File(<span class="string">&quot;src/main/resources/static/img/sunshine.png&quot;</span>));</span><br><span class="line">            helper.addInline(<span class="string">&quot;img&quot;</span>, file); </span><br><span class="line">            jms.send(message);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;发送成功&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> e.getMessage();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>helper.addInline(“img”, file);中的img和图片标签里cid后的名称相对应。启动项目访问<a target="_blank" rel="noopener" href="http://localhost/email/sendInlineMail%EF%BC%8C%E6%8F%90%E7%A4%BA%E5%8F%91%E9%80%81%E6%88%90%E5%8A%9F%EF%BC%9A">http://localhost/email/sendInlineMail，提示发送成功：</a></p>
<p><img src="http://59.110.212.214/upload/20200710_16200425.png"></p>
<h2 id="使用模板发送邮件"><a href="#使用模板发送邮件" class="headerlink" title="使用模板发送邮件"></a>使用模板发送邮件</h2><p>在发送验证码等情况下可以创建一个邮件的模板，唯一的变量为验证码。这个例子中使用的模板解析引擎为Thymeleaf，所以首先引入Thymeleaf依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在template目录下创建一个emailTemplate.html模板：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>模板<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    您好，您的验证码为&#123;code&#125;，请在两分钟内使用完成操作。</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>发送模板邮件，本质上还是发送HTML邮件，只不过多了绑定变量的过程，详细如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.springboot.demo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.MimeMessage;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.io.FileSystemResource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.SimpleMailMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.javamail.JavaMailSender;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.javamail.MimeMessageHelper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.TemplateEngine;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.context.Context;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/email&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmailController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JavaMailSender jms;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.mail.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String from;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TemplateEngine templateEngine;</span><br><span class="line">	</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;sendTemplateEmail&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sendTemplateEmail</span><span class="params">(String code)</span> </span>&#123;</span><br><span class="line">        MimeMessage message = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            message = jms.createMimeMessage();</span><br><span class="line">            MimeMessageHelper helper = <span class="keyword">new</span> MimeMessageHelper(message, <span class="keyword">true</span>);</span><br><span class="line">            helper.setFrom(from); </span><br><span class="line">            helper.setTo(<span class="string">&quot;888888@qq.com&quot;</span>); <span class="comment">// 接收地址</span></span><br><span class="line">            helper.setSubject(<span class="string">&quot;邮件摸板测试&quot;</span>); <span class="comment">// 标题</span></span><br><span class="line">            <span class="comment">// 处理邮件模板</span></span><br><span class="line">            Context context = <span class="keyword">new</span> Context();</span><br><span class="line">            context.setVariable(<span class="string">&quot;code&quot;</span>, code);</span><br><span class="line">            String template = templateEngine.process(<span class="string">&quot;emailTemplate&quot;</span>, context);</span><br><span class="line">            helper.setText(template, <span class="keyword">true</span>);</span><br><span class="line">            jms.send(message);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;发送成功&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> e.getMessage();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中code对应模板里的${code}变量。启动项目，访问<a target="_blank" rel="noopener" href="http://localhost/email/sendTemplateEmail?code=EOS9%EF%BC%8C%E9%A1%B5%E9%9D%A2%E6%8F%90%E7%A4%BA%E5%8F%91%E9%80%81%E6%88%90%E5%8A%9F%EF%BC%9A">http://localhost/email/sendTemplateEmail?code=EOS9，页面提示发送成功：</a></p>
<p><img src="http://59.110.212.214/upload/20200710_16211637.png"></p>
<blockquote>
<p>源码链接：<a target="_blank" rel="noopener" href="https://github.com/wuyouzhuguli/Spring-Boot-Demos/tree/master/22.Spring-Boot-Email">https://github.com/wuyouzhuguli/Spring-Boot-Demos/tree/master/22.Spring-Boot-Email</a></p>
</blockquote>
<blockquote>
<p>本文作者： MrBird<br>本文链接： <a target="_blank" rel="noopener" href="http://mrbird.cc/Spring-Boot-Email.html">http://mrbird.cc/Spring-Boot-Email.html</a><br>版权声明： 本博客所有文章除特别声明外，均采用 CC BY-NC-SA 4.0 许可协议。转载请注明出处！</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/04/%E4%BD%BF%E7%94%A8Spring%20Boot%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/" data-id="ckke5nr3s002lcl8g4q8xc7bw" data-title="使用springboot发送邮件" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/springboot/" rel="tag">springboot</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%82%AE%E4%BB%B6/" rel="tag">邮件</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-命令生成公钥私钥文件" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/12/04/%E5%91%BD%E4%BB%A4%E7%94%9F%E6%88%90%E5%85%AC%E9%92%A5%E7%A7%81%E9%92%A5%E6%96%87%E4%BB%B6/" class="article-date">
  <time class="dt-published" datetime="2020-12-04T02:10:17.000Z" itemprop="datePublished">2020-12-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/">版本控制</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/12/04/%E5%91%BD%E4%BB%A4%E7%94%9F%E6%88%90%E5%85%AC%E9%92%A5%E7%A7%81%E9%92%A5%E6%96%87%E4%BB%B6/">命令生成公钥私钥文件</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 一直回车就可以看到id_rsa和id_rsa.pub这两个文件</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ssh-keygen -t rsa -C <span class="string">&quot;youremail@example.com&quot;</span></span> </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="ssh文件位置："><a href="#ssh文件位置：" class="headerlink" title=".ssh文件位置："></a>.ssh文件位置：</h4><blockquote>
<ul>
<li>windows:<br>  C:\Users\Administrator.ssh</li>
</ul>
</blockquote>
<ul>
<li>mac      :<br>  ~/.ssh</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/04/%E5%91%BD%E4%BB%A4%E7%94%9F%E6%88%90%E5%85%AC%E9%92%A5%E7%A7%81%E9%92%A5%E6%96%87%E4%BB%B6/" data-id="ckke5nr3v002vcl8g6hvs73lb" data-title="命令生成公钥私钥文件" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%85%AC%E9%92%A5/" rel="tag">公钥</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-少年，不要滥用箭头函数啊" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/12/04/%E5%B0%91%E5%B9%B4%EF%BC%8C%E4%B8%8D%E8%A6%81%E6%BB%A5%E7%94%A8%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E5%95%8A/" class="article-date">
  <time class="dt-published" datetime="2020-12-04T02:10:17.000Z" itemprop="datePublished">2020-12-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/js/">js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/12/04/%E5%B0%91%E5%B9%B4%EF%BC%8C%E4%B8%8D%E8%A6%81%E6%BB%A5%E7%94%A8%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E5%95%8A/">少年，不要滥用箭头函数啊</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>在ES6大行其道的今天，不应用点ES6特性似乎有些政治不正确。最近刚好有个Node的项目，最低要支持到nodejs 4.0，在node.green看了下ES6的支持度，我想使用的特性基本都有支持，遂决定在新项目中采用ES6来写。</p>
<p>当然第一件事情就是毫不留情地消灭var，项目中能用const的地方不用let，能用let的地方不用var。</p>
<p>第二件事情就是使用劳动人民喜闻乐见的箭头函数替代function。当我心满意足地看到满屏的 =&gt; 时，现实给了我一记响亮的耳光——改过之后的程序错误百出！</p>
<p>所以，当我们使用箭头函数时，一定要搞清楚箭头函数是什么回事，适用于什么场景。本文就针对以上问题来讨论下箭头函数。</p>
<h2 id="箭头函数是什么？"><a href="#箭头函数是什么？" class="headerlink" title="箭头函数是什么？"></a>箭头函数是什么？</h2><p>箭头函数的语法我就不讲了，相信大家都见识过。跟我一样，大家喜欢箭头函数90%的原因是它好看。除了好看，它是不是与function等价呢？肯定不等价，因为TC39不可能仅因为好看而引入一个语法糖（class除外）。</p>
<p>箭头函数的渊源可以追溯到上古时期一个叫lambda演算的东西。lambda演算是数学家提出来的，有些数学家跟我们程序员一样也很懒，数学定理那么多，今天要证三角定律，明天要证勾股定律，累不累！那能不能将所有的证明问题用一个统一的体系进行形式化描述，然后由机器来完成自动推导呢？lambda演算就是干这个的，图灵也搞了一套体系叫图灵机，两者是等价的。</p>
<p>关于lambda演算说了这么多，好像跟今天要讲的箭头函数没什么关系？其实是有关系的，lambda演算深刻影响了箭头函数的设计。数学家们喜欢用纯函数式编程语言，纯函数的特点是没有副作用，给予特定的输入，总是产生确定的输出，甚至有些情况下通过输出能够反推输入。要实现纯函数，必须使函数的执行过程不依赖于任何外部状态，整个函数就像一个数学公式，给定一套输入参数，不管是在地球上还是火星上执行都是同一个结果。</p>
<p>箭头函数要实现类似纯函数的效果，必须剔除外部状态。所以当你定义一个箭头函数，在普通函数里常见的 this 、 arguments 、 caller 是统统没有的。</p>
<h2 id="箭头函数没有-this"><a href="#箭头函数没有-this" class="headerlink" title="箭头函数没有 this"></a>箭头函数没有 this</h2><p>箭头函数没有 this ，那下面的代码明显可以取到 this 啊：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line">  <span class="keyword">let</span> b = <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="built_in">this</span>.a)</span><br><span class="line"></span><br><span class="line">  b()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo()  <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<p>以上箭头函数中的 this 其实是父级作用域中的 this ，即函数 foo 的 this 。箭头函数引用了父级的变量，构成了一个闭包。以上代码等价于：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> self = <span class="built_in">this</span></span><br><span class="line">  <span class="keyword">let</span> b = <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(self.a)</span><br><span class="line"></span><br><span class="line">  b()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo()  <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<p>箭头函数不仅没有 this ，常用的 arguments 也没有。如果你能获取到 arguments ，那它一定是来自父作用域的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo(<span class="number">1</span>, <span class="number">2</span>)(<span class="number">3</span>, <span class="number">4</span>)  <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<p>上例中如果箭头函数有 arguments ，就应该输出的是3而不是1。</p>
<p>一个经常犯的错误是使用箭头函数定义对象的方法，如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  foo: <span class="number">1</span>,</span><br><span class="line">  bar: <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="built_in">this</span>.foo)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a.bar()  <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>
<p>以上代码中，箭头函数中的 this 并不是指向 a 这个对象。对象 a 并不能构成一个作用域，所以再往上到达全局作用域， this 就指向全局作用域。如果我们使用普通函数的定义方法，输出结果就符合预期，这是因为 a.bar() 函数执行时作用域绑定到了 a 对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  foo: <span class="number">1</span>,</span><br><span class="line">  bar: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="built_in">this</span>.foo) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a.bar()  <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>
<p>另一个错误是在原型上使用箭头函数，如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.foo = <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">A.prototype.bar = <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="built_in">this</span>.foo)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> A()</span><br><span class="line">a.bar()  <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>
<p>同样，箭头函数中的 this 不是指向 A ，而是根据变量查找规则回溯到了全局作用域。同样，使用普通函数就不存在问题。</p>
<p>通过以上说明，我们可以看出，箭头函数除了传入的参数之外，真的是什么都没有！如果你在箭头函数引用了 this 、 arguments 或者参数之外的变量，那它们一定不是箭头函数本身包含的，而是从父级作用域继承的。</p>
<h2 id="什么情况下该使用箭头函数"><a href="#什么情况下该使用箭头函数" class="headerlink" title="什么情况下该使用箭头函数"></a>什么情况下该使用箭头函数</h2><p>到这里，我们可以发现箭头函数并不是万金油，稍不留神就会踩坑。</p>
<p>至于什么情况该使用箭头函数，《You Don’t Know About JS》给出了一个决策图：</p>
<p><img src="http://59.110.212.214/upload/20200817_15063740.png"><br>以上决策图看起来有点复杂，我认为有三点比较重要：</p>
<p>箭头函数适合于无复杂逻辑或者无副作用的纯函数场景下，例如用在 map 、 reduce 、 filter 的回调函数定义中；<br>不要在最外层定义箭头函数，因为在函数内部操作 this 会很容易污染全局作用域。最起码在箭头函数外部包一层普通函数，将 this 控制在可见的范围内；<br>如开头所述，箭头函数最吸引人的地方是简洁。在有多层函数嵌套的情况下，箭头函数的简洁性并没有很大的提升，反而影响了函数的作用范围的识别度，这种情况不建议使用箭头函数。</p>
<p>来自：<a target="_blank" rel="noopener" href="https://jingsam.github.io/2016/12/08/things-you-should-know-about-arrow-functions.html">https://jingsam.github.io/2016/12/08/things-you-should-know-about-arrow-functions.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/04/%E5%B0%91%E5%B9%B4%EF%BC%8C%E4%B8%8D%E8%A6%81%E6%BB%A5%E7%94%A8%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E5%95%8A/" data-id="ckke5nr3w002ycl8gdc4711rz" data-title="少年，不要滥用箭头函数啊" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/" rel="tag">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0/" rel="tag">箭头函数</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-成长" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/12/04/%E6%88%90%E9%95%BF/" class="article-date">
  <time class="dt-published" datetime="2020-12-04T02:10:17.000Z" itemprop="datePublished">2020-12-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/mele/">mele</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/12/04/%E6%88%90%E9%95%BF/">成长</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[<img src="http://mele.cool//image-20201202215818139.png" alt="image-20201202215818139">]</p>
<p><img src="http://mele.cool//UMywZV.jpg" alt="UMywZV.jpg"></p>
<p>[<img src="http://mele.cool//image-20201202215935168.png" alt="image-20201202215935168">]</p>
<p><img src="http://mele.cool//image-20201202215956241.png" alt="image-20201202215956241"></p>
<p><img src="http://mele.cool//image-20201202220018523.png" alt="image-20201202220018523"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/04/%E6%88%90%E9%95%BF/" data-id="ckke5nr3y0036cl8g43r0eqbw" data-title="成长" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mele/" rel="tag">mele</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-接口和抽象类" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/12/04/%E6%8E%A5%E5%8F%A3%E5%92%8C%E6%8A%BD%E8%B1%A1%E7%B1%BB/" class="article-date">
  <time class="dt-published" datetime="2020-12-04T02:10:17.000Z" itemprop="datePublished">2020-12-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/12/04/%E6%8E%A5%E5%8F%A3%E5%92%8C%E6%8A%BD%E8%B1%A1%E7%B1%BB/">接口和抽象类</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="1-抽象类"><a href="#1-抽象类" class="headerlink" title="1. 抽象类"></a>1. 抽象类</h3><blockquote>
<p>  什么是抽象类:<br>    包含一个抽象方法的类就是抽象类<br>    抽象方法:<br>    声明而未被实现的方法，抽象方法必须使用abstract关键词字声明</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;  <span class="comment">//关键词abstract，声明该类为抽象类</span></span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">int</span> age;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Num</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="title">Name</span><span class="params">()</span></span>; <span class="comment">//声明该方法为抽象方法</span></span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>抽象类被子类继承，子类（如果不是抽象类）必须重写抽象类中的所有抽象方法</li>
<li>抽象类不能被直接实例化，要通过其子类进行实例化 </li>
<li>只要包含一个抽象方法的抽象类，该方法必须要定义成抽象类，不管是否还包含有其他方法。</li>
<li>子类中的抽象方法不能与父类的抽象方法同名。</li>
<li>abstract不能与final并列修饰同一个类。</li>
<li>abstract不能与private、static、final或native并列修饰同一个方法。</li>
</ul>
<h4 id="为什么需要用到抽象类？"><a href="#为什么需要用到抽象类？" class="headerlink" title="为什么需要用到抽象类？"></a>为什么需要用到抽象类？</h4><blockquote>
<p>在下面这个例子中，把打印机类封装成抽象类，把print定义成抽象类，当HPPrinter和CannonPrinter要继承printer类的时候，必须重写print函数。<br>这样写的好处是，每个打印机都有自己打印方式，此举可以防止子类没有写明打印方式。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">Printer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">open</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        system.out.print(<span class="string">&quot;打印机开启&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        system.out.print(<span class="string">&quot;打印机关闭&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>;  <span class="comment">//把print方法定义为抽象方法</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> HPPrinter extends Printer &#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;             <span class="comment">//必须重写抽象方法print()   </span></span><br><span class="line">        system.out.print(<span class="string">&quot;惠普打印机开始打印&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> CanonPrinter extends Printer &#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;             <span class="comment">//必须重写抽象方法print()</span></span><br><span class="line">        system.out.print(<span class="string">&quot;佳能打印机开始打印&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-接口"><a href="#2-接口" class="headerlink" title="2. 接口"></a>2. 接口</h3><blockquote>
<p>接口是java中最重要的概念，接口可以理解为一种特殊的类，里面全部是由全局常量和公共的抽象方法组成,接口中所有方法都是抽象方法.接口当中所有的方法都是public类型.</p>
</blockquote>
<p>接口的格式:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">interfaceName</span></span>&#123;</span><br><span class="line">    全局常量</span><br><span class="line">    抽象方法</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接口的实现也必须通过子类，使用关键字implements，而且接口是可以多实现的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">implements</span> <span class="title">Inter1</span>,<span class="title">Inter2</span></span>&#123; <span class="comment">//Inter1和Inter2是接口</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>一个类可以同时继承抽象类和接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">Abs</span> <span class="keyword">implements</span> <span class="title">Inter1</span>,<span class="title">Inter2</span></span>&#123; <span class="comment">//Abs是一个抽象类</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>一个接口不能继承抽象类，但可以通过implements关键字继承多个接口，实现接口的多继承</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Inter</span> <span class="keyword">implements</span> <span class="title">Inter1</span>,<span class="title">Inter2</span></span>&#123; <span class="comment">//Inter、Inter1、Inter2都为接口</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-抽象类和接口区别"><a href="#3-抽象类和接口区别" class="headerlink" title="3. 抽象类和接口区别"></a>3. 抽象类和接口区别</h3><h4 id="3-1-语法层次"><a href="#3-1-语法层次" class="headerlink" title="3.1 语法层次"></a>3.1 语法层次</h4><p>public abstract class People {  //关键词abstract，声明该类为抽象类<br>    void Num();　　　　　　<br>    abstract void Name(); 　　　//声明该方法为抽象方法<br>}</p>
<p>Interface Person {<br>　　void Num();<br>　　void Name();<br>}　<br>抽象类方式中，抽象类可以拥有任意范围的成员数据，同时也可以拥有自己的非抽象方法，<br>但是接口方式中，它仅能够有静态、不能修改的成员数据（但是我们一般是不会在接口中使用成员数据），同时它所有的方法都必须是抽象的。<br>在某种程度上来说，接口是抽象类的特殊化。<br>对子类而言，它只能继承一个抽象类（这是java为了数据安全而考虑的），但是却可以实现多个接口。</p>
<h4 id="3-2-设计层次"><a href="#3-2-设计层次" class="headerlink" title="3.2 设计层次"></a>3.2 设计层次</h4><h5 id="1-抽象层次不同"><a href="#1-抽象层次不同" class="headerlink" title="1. 抽象层次不同"></a>1. 抽象层次不同</h5><p>抽象类是对类抽象，而接口是对行为的抽象。抽象类是对整个类整体进行抽象，包括属性、行为，但是接口却是对类局部（行为）进行抽象。</p>
<h5 id="2-跨域不同"><a href="#2-跨域不同" class="headerlink" title="2. 跨域不同"></a>2. 跨域不同</h5><p>抽象类所跨域的是具有相似特点的类，而接口却可以跨域不同的类。我们知道抽象类是从子类中发现公共部分，然后泛化成抽象类，子类继承该父类即可，<br>但是接口不同。实现它的子类可以不存在任何关系，共同之处。例如猫、狗可以抽象成一个动物类抽象类，具备叫的方法。鸟、飞机可以实现飞Fly接口，具备飞的行为，这里我们总不能将鸟、飞机共用一个父类吧！<br>所以说抽象类所体现的是一种继承关系，要想使得继承关系合理，父类和派生类之间必须存在”is-a” 关系，即父类和派生类在概念本质上应该是相同的。<br>对于接口则不然，并不要求接口的实现者和接口定义在概念本质上是一致的， 仅仅是实现了接口定义的契约而已。</p>
<h5 id="3-设计层次不同"><a href="#3-设计层次不同" class="headerlink" title="3. 设计层次不同"></a>3. 设计层次不同</h5><p>对于抽象类而言，它是自下而上来设计的，我们要先知道子类才能抽象出父类，而接口则不同，它根本就不需要知道子类的存在，只需要定义一个规则即可，至于什么子类、什么时候怎么实现它一概不知。<br>比如我们只有一个猫类在这里，如果你这是就抽象成一个动物类，是不是设计有点儿过度？我们起码要有两个动物类，猫、狗在这里，我们在抽象他们的共同点形成动物抽象类吧！所以说抽象类往往都是通过重构而来的！<br>但是接口就不同，比如说飞，我们根本就不知道会有什么东西来实现这个飞接口，怎么实现也不得而知，我们要做的就是事前定义好飞的行为接口。所以说抽象类是自底向上抽象而来的，接口是自顶向下设计出来的。</p>
<blockquote>
<p>语法规范区别：<br>1）接口不能有构造方法，抽象类可以有。<br>2）接口不能有方法体，抽象类可以有。<br>3）接口不能有静态方法，抽象类可以有。<br>4）在接口中凡是变量必须是public static final(只能是常量)，而在抽象类中没有要求。<br>5)抽象类可以定义非抽象方法，而接口中所有的方法都是抽象的</p>
</blockquote>
<p>相同点:<br>    都不能被实例化,只能通过子类实例化.<br>    都可以被继承.<br>    都可以实现程序的多态性.<br>不同点:<br>    语法层次:抽象类用abstract关键字修饰类为抽象类,接口Interface;<br>    语法规范:<br>        1）接口不能有构造方法，抽象类可以有。<br>        2）接口不能有方法体，抽象类可以有。<br>        3）接口不能有静态方法，抽象类可以有。<br>        4）在接口中凡是变量必须是public static final(只能是常量)，而在抽象类中没有要求。</p>
<h5 id="相同点"><a href="#相同点" class="headerlink" title="相同点:"></a>相同点:</h5><pre><code>都不能被实例化,只能通过子类实例化.
都可以被继承.
都可以实现程序的多态性.
</code></pre>
<h5 id="不同点"><a href="#不同点" class="headerlink" title="不同点:"></a>不同点:</h5><pre><code>语法层次:抽象类用abstract关键字修饰类为抽象类,接口Interface;
语法规范:
    1）接口不能有构造方法，抽象类可以有。
    2）接口不能有方法体，抽象类可以有。
    3）接口不能有静态方法，抽象类可以有。
    4）在接口中凡是变量必须是public static final(只能是常量)，而在抽象类中没有要求。
    5)抽象类可以定义非抽象方法，而接口中所有的方法都是抽象的        5)抽象类可以定义非抽象方法，而接口中所有的方法都是抽象的
</code></pre>
<p>作者：FantJ<br>链接：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/b0cf5d770a86">https://www.jianshu.com/p/b0cf5d770a86</a><br>来源：简书<br>作者: 健健csdn<br>链接:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39788493/article/details/80854547">https://blog.csdn.net/weixin_39788493/article/details/80854547</a><br>来源: CSDN<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/04/%E6%8E%A5%E5%8F%A3%E5%92%8C%E6%8A%BD%E8%B1%A1%E7%B1%BB/" data-id="ckke5nr3z003acl8ggwih5gbz" data-title="接口和抽象类" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%8A%BD%E8%B1%A1%E7%B1%BB/" rel="tag">抽象类</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%8E%A5%E5%8F%A3/" rel="tag">接口</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-消息队列面试题汇总" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/12/04/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E9%9D%A2%E8%AF%95%E9%A2%98%E6%B1%87%E6%80%BB/" class="article-date">
  <time class="dt-published" datetime="2020-12-04T02:10:17.000Z" itemprop="datePublished">2020-12-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/mq/">mq</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/12/04/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E9%9D%A2%E8%AF%95%E9%A2%98%E6%B1%87%E6%80%BB/">消息队列面试题</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="1-消息队列的应用场景有哪些？"><a href="#1-消息队列的应用场景有哪些？" class="headerlink" title="1.消息队列的应用场景有哪些？"></a>1.消息队列的应用场景有哪些？</h4><p>答：消息队列的应用场景如下。</p>
<ul>
<li>应用解耦，比如，用户下单后，订单系统需要通知库存系统，假如库存系统无法访问，则订单减库存将失败，从而导致订单失败。订单系统与库存系统耦合，这个时候如果使用消息队列，可以返回给用户成功，先把消息持久化，等库存系统恢复后，就可以正常消费减去库存了。</li>
<li>削峰填谷，比如，秒杀活动，一般会因为流量过大，从而导致流量暴增，应用挂掉，这个时候加上消息队列，服务器接收到用户的请求后，首先写入消息队列，假如消息队列长度超过最大数量，则直接抛弃用户请求或跳转到错误页面。</li>
<li>日志系统，比如，客户端负责将日志采集，然后定时写入消息队列，消息队列再统一将日志数据存储和转发。</li>
</ul>
<h4 id="2-RabbitMQ-有哪些优点？"><a href="#2-RabbitMQ-有哪些优点？" class="headerlink" title="2.RabbitMQ 有哪些优点？"></a>2.RabbitMQ 有哪些优点？</h4><p>答：RabbitMQ 的优点如下：</p>
<ul>
<li>可靠性，RabbitMQ 的持久化支持，保证了消息的稳定性；</li>
<li>高并发，RabbitMQ 使用了 Erlang 开发语言，Erlang 是为电话交换机开发的语言，天生自带高并发光环和高可用特性；</li>
<li>集群部署简单，正是因为 Erlang 使得 RabbitMQ 集群部署变的非常简单；</li>
<li>社区活跃度高，因为 RabbitMQ 应用比较广泛，所以社区的活跃度也很高；</li>
<li>解决问题成本低，因为资料比较多，所以解决问题的成本也很低；</li>
<li>支持多种语言，主流的编程语言都支持，如 Java、.NET、PHP、Python、JavaScript、Ruby、Go 等；</li>
<li>插件多方便使用，如网页控制台消息管理插件、消息延迟插件等。</li>
</ul>
<h4 id="3-RabbitMQ-有哪些重要的角色？"><a href="#3-RabbitMQ-有哪些重要的角色？" class="headerlink" title="3.RabbitMQ 有哪些重要的角色？"></a>3.RabbitMQ 有哪些重要的角色？</h4><p>答：RabbitMQ 包含以下三个重要的角色：</p>
<ul>
<li>生产者：消息的创建者，负责创建和推送数据到消息服务器；</li>
<li>消费者：消息的接收方，用于处理数据和确认消息；</li>
<li>代理：就是 RabbitMQ 本身，用于扮演“快递”的角色，本身不生产消息，只是扮演“快递”的角色。</li>
</ul>
<h4 id="4-RabbitMQ-有哪些重要的组件？它们有什么作用？"><a href="#4-RabbitMQ-有哪些重要的组件？它们有什么作用？" class="headerlink" title="4.RabbitMQ 有哪些重要的组件？它们有什么作用？"></a>4.RabbitMQ 有哪些重要的组件？它们有什么作用？</h4><p>答：RabbitMQ 包含的重要组件有：ConnectionFactory（连接管理器）、Channel（信道）、Exchange（交换器）、Queue（队列）、RoutingKey（路由键）、BindingKey（绑定键） 等重要的组件，它们的作用如下：</p>
<ul>
<li>ConnectionFactory（连接管理器）：应用程序与 RabbitMQ 之间建立连接的管理器，程序代码中使用；</li>
<li>Channel（信道）：消息推送使用的通道；</li>
<li>Exchange（交换器）：用于接受、分配消息；</li>
<li>Queue（队列）：用于存储生产者的消息；</li>
<li>RoutingKey（路由键）：用于把生成者的数据分配到交换器上；</li>
<li>BindingKey（绑定键）：用于把交换器的消息绑定到队列上。</li>
</ul>
<p>运行流程，如下图所示：</p>
<p><img src="https://images.gitbook.cn/5a2e5b40-da7f-11e9-b65e-cd2fb825a32b" alt="1"></p>
<h4 id="5-什么是消息持久化？"><a href="#5-什么是消息持久化？" class="headerlink" title="5.什么是消息持久化？"></a>5.什么是消息持久化？</h4><p>答：消息持久化是把消息保存到物理介质上，以防止消息的丢失。</p>
<h4 id="6-RabbitMQ-要实现消息持久化，需要满足哪些条件？"><a href="#6-RabbitMQ-要实现消息持久化，需要满足哪些条件？" class="headerlink" title="6.RabbitMQ 要实现消息持久化，需要满足哪些条件？"></a>6.RabbitMQ 要实现消息持久化，需要满足哪些条件？</h4><p>答：RabbitMQ 要实现消息持久化，必须满足以下 4 个条件：</p>
<ul>
<li>投递消息的时候 durable 设置为 true，消息持久化，代码：channel.queueDeclare(x, true, false, false, null)，参数 2 设置为 true 持久化；</li>
<li>设置投递模式 deliveryMode 设置为 2（持久），代码：channel.basicPublish(x, x, MessageProperties.PERSISTENT<em>TEXT</em>PLAIN,x)，参数 3 设置为存储纯文本到磁盘；</li>
<li>消息已经到达持久化交换器上；</li>
<li>消息已经到达持久化的队列。</li>
</ul>
<h4 id="7-消息持久化有哪些缺点？如何缓解？"><a href="#7-消息持久化有哪些缺点？如何缓解？" class="headerlink" title="7.消息持久化有哪些缺点？如何缓解？"></a>7.消息持久化有哪些缺点？如何缓解？</h4><p>答：消息持久化的缺点是很消耗性能，因为要写入硬盘要比写入内存性能较低很多，从而降低了服务器的吞吐量。可使用固态硬盘来提高读写速度，以达到缓解消息持久化的缺点。</p>
<h4 id="8-如何使用-Java-代码连接-RabbitMQ？"><a href="#8-如何使用-Java-代码连接-RabbitMQ？" class="headerlink" title="8.如何使用 Java 代码连接 RabbitMQ？"></a>8.如何使用 Java 代码连接 RabbitMQ？</h4><p>答：使用 Java 代码连接 RabbitMQ 有以下两种方式：</p>
<p>方式一：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">GetRabbitConnection</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ConnectionFactory factory = <span class="keyword">new</span> ConnectionFactory();</span><br><span class="line">    factory.setUsername(Config.UserName);</span><br><span class="line">    factory.setPassword(Config.Password);</span><br><span class="line">    factory.setVirtualHost(Config.VHost);</span><br><span class="line">    factory.setHost(Config.Host);</span><br><span class="line">    factory.setPort(Config.Port);</span><br><span class="line">    Connection conn = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        conn = factory.newConnection();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> conn;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>方式二：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">GetRabbitConnection2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ConnectionFactory factory = <span class="keyword">new</span> ConnectionFactory();</span><br><span class="line">    <span class="comment">// 连接格式：amqp://userName:password@hostName:portNumber/virtualHost</span></span><br><span class="line">    String uri = String.format(<span class="string">&quot;amqp://%s:%s@%s:%d%s&quot;</span>, Config.UserName, Config.Password, Config.Host, Config.Port,</span><br><span class="line">            Config.VHost);</span><br><span class="line">    Connection conn = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        factory.setUri(uri);</span><br><span class="line">        factory.setVirtualHost(Config.VHost);</span><br><span class="line">        conn = factory.newConnection();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> conn;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="9-使用-Java-代码编写一个-RabbitMQ-消费和生产的示例？"><a href="#9-使用-Java-代码编写一个-RabbitMQ-消费和生产的示例？" class="headerlink" title="9.使用 Java 代码编写一个 RabbitMQ 消费和生产的示例？"></a>9.使用 Java 代码编写一个 RabbitMQ 消费和生产的示例？</h4><p>答：代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    publisher();     <span class="comment">// 生产消息</span></span><br><span class="line">    consumer();     <span class="comment">// 消费消息</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 推送消息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">publisher</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 创建一个连接</span></span><br><span class="line">    Connection conn = ConnectionFactoryUtil.GetRabbitConnection();</span><br><span class="line">    <span class="keyword">if</span> (conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 创建通道</span></span><br><span class="line">            Channel channel = conn.createChannel();</span><br><span class="line">            <span class="comment">// 声明队列【参数说明：参数一：队列名称，参数二：是否持久化；参数三：是否独占模式；参数四：消费者断开连接时是否删除队列；参数五：消息其他参数】</span></span><br><span class="line">            channel.queueDeclare(Config.QueueName, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">null</span>);</span><br><span class="line">            String content = String.format(<span class="string">&quot;当前时间：%s&quot;</span>, <span class="keyword">new</span> Date().getTime());</span><br><span class="line">            <span class="comment">// 发送内容【参数说明：参数一：交换机名称；参数二：队列名称，参数三：消息的其他属性-routing headers，此属性为MessageProperties.PERSISTENT_TEXT_PLAIN用于设置纯文本消息存储到硬盘；参数四：消息主体】</span></span><br><span class="line">            channel.basicPublish(<span class="string">&quot;&quot;</span>, Config.QueueName, <span class="keyword">null</span>, content.getBytes(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;已发送消息：&quot;</span> + content);</span><br><span class="line">            <span class="comment">// 关闭连接</span></span><br><span class="line">            channel.close();</span><br><span class="line">            conn.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 消费消息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">consumer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 创建一个连接</span></span><br><span class="line">    Connection conn = ConnectionFactoryUtil.GetRabbitConnection();</span><br><span class="line">    <span class="keyword">if</span> (conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 创建通道</span></span><br><span class="line">            Channel channel = conn.createChannel();</span><br><span class="line">            <span class="comment">// 声明队列【参数说明：参数一：队列名称，参数二：是否持久化；参数三：是否独占模式；参数四：消费者断开连接时是否删除队列；参数五：消息其他参数】</span></span><br><span class="line">            channel.queueDeclare(Config.QueueName, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 创建订阅器，并接受消息</span></span><br><span class="line">            channel.basicConsume(Config.QueueName, <span class="keyword">false</span>, <span class="string">&quot;&quot;</span>, <span class="keyword">new</span> DefaultConsumer(channel) &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties,</span></span></span><br><span class="line"><span class="function"><span class="params">                        <span class="keyword">byte</span>[] body)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">                    String routingKey = envelope.getRoutingKey(); <span class="comment">// 队列名称</span></span><br><span class="line">                    String contentType = properties.getContentType(); <span class="comment">// 内容类型</span></span><br><span class="line">                    String content = <span class="keyword">new</span> String(body, <span class="string">&quot;utf-8&quot;</span>); <span class="comment">// 消息正文</span></span><br><span class="line">                    System.out.println(<span class="string">&quot;消息正文：&quot;</span> + content);</span><br><span class="line">                    channel.basicAck(envelope.getDeliveryTag(), <span class="keyword">false</span>); <span class="comment">// 手动确认消息【参数说明：参数一：该消息的index；参数二：是否批量应答，true批量确认小于index的消息】</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="10-RabbitMQ-交换器类型有哪些？"><a href="#10-RabbitMQ-交换器类型有哪些？" class="headerlink" title="10.RabbitMQ 交换器类型有哪些？"></a>10.RabbitMQ 交换器类型有哪些？</h4><p>答：RabbitMQ 消费类型也就是交换器（Exchange）类型有以下四种：</p>
<ul>
<li>direct：轮询方式</li>
<li>headers：轮询方式，允许使用 header 而非路由键匹配消息，性能差，几乎不用</li>
<li>fanout：广播方式，发送给所有订阅者</li>
<li>topic：匹配模式，允许使用正则表达式匹配消息</li>
</ul>
<p>RabbitMQ 默认的是 direct 方式。</p>
<h4 id="11-RabbitMQ-如何确保每个消息能被消费？"><a href="#11-RabbitMQ-如何确保每个消息能被消费？" class="headerlink" title="11.RabbitMQ 如何确保每个消息能被消费？"></a>11.RabbitMQ 如何确保每个消息能被消费？</h4><p>答：RabbitMQ 使用 ack 消息确认的方式保证每个消息都能被消费，开发者可根据自己的实际业务，选择 channel.basicAck() 方法手动确认消息被消费。</p>
<h4 id="12-RabbitMQ-接收到消息之后必须消费吗？"><a href="#12-RabbitMQ-接收到消息之后必须消费吗？" class="headerlink" title="12.RabbitMQ 接收到消息之后必须消费吗？"></a>12.RabbitMQ 接收到消息之后必须消费吗？</h4><p>答：RabbitMQ 接收到消息之后可以不消费，在消息确认消费之前，可以做以下两件事：</p>
<ul>
<li>拒绝消息消费，使用 channel.basicReject(消息编号, true) 方法，消息会被分配给其他订阅者；</li>
<li>设置为死信队列，死信队列是用于专门存放被拒绝的消息队列。</li>
</ul>
<h4 id="13-topic-模式下发布了一个路由键为“com-mq-rabbit-error”的消息，请问以下不能接收到消息的是？"><a href="#13-topic-模式下发布了一个路由键为“com-mq-rabbit-error”的消息，请问以下不能接收到消息的是？" class="headerlink" title="13.topic 模式下发布了一个路由键为“com.mq.rabbit.error”的消息，请问以下不能接收到消息的是？"></a>13.topic 模式下发布了一个路由键为“com.mq.rabbit.error”的消息，请问以下不能接收到消息的是？</h4><p>A：cn.mq.rabbit.*<br>B：#.error<br>C：cn.mq.*<br>D：cn.mq.#</p>
<p>答：C</p>
<p>题目解析：“*”用于匹配一个分段（用“.”分割）的内容，“#”用于匹配 0 和多个字符。</p>
<h4 id="14-以下可以获取历史消息的是？"><a href="#14-以下可以获取历史消息的是？" class="headerlink" title="14.以下可以获取历史消息的是？"></a>14.以下可以获取历史消息的是？</h4><p>A：topic 交换器<br>B：fanout 交换器<br>C：direct 交换器<br>D：以上都不是</p>
<p>答：C</p>
<p>题目解析：fanout 和 topic 都是广播形式的，因此无法获取历史消息，而 direct 可以。</p>
<h4 id="15-RabbitMQ-包含事务功能吗？如何使用？"><a href="#15-RabbitMQ-包含事务功能吗？如何使用？" class="headerlink" title="15.RabbitMQ 包含事务功能吗？如何使用？"></a>15.RabbitMQ 包含事务功能吗？如何使用？</h4><p>答：RabbitMQ 包含事务功能，主要是对信道（Channel）的设置，主要方法有以下三个：</p>
<ul>
<li>channel.txSelect() 声明启动事务模式；</li>
<li>channel.txComment() 提交事务；</li>
<li>channel.txRollback() 回滚事务。</li>
</ul>
<h4 id="16-RabbitMQ-的事务在什么情况下是无效的？"><a href="#16-RabbitMQ-的事务在什么情况下是无效的？" class="headerlink" title="16.RabbitMQ 的事务在什么情况下是无效的？"></a>16.RabbitMQ 的事务在什么情况下是无效的？</h4><p>答：RabbitMQ 的事务在 autoAck=true 也就是自动消费确认的时候，事务是无效的。因为如果是自动消费确认，RabbitMQ 会直接把消息从队列中移除，即使后面事务回滚也不能起到任何作用。</p>
<h4 id="17-Kafka-可以脱离-ZooKeeper-单独使用吗？"><a href="#17-Kafka-可以脱离-ZooKeeper-单独使用吗？" class="headerlink" title="17.Kafka 可以脱离 ZooKeeper 单独使用吗？"></a>17.Kafka 可以脱离 ZooKeeper 单独使用吗？</h4><p>答：Kafka 不能脱离 ZooKeeper 单独使用，因为 Kafka 使用 ZooKeeper 管理和协调 Kafka 的节点服务器。</p>
<h4 id="18-Kafka-有几种数据保留的策略？"><a href="#18-Kafka-有几种数据保留的策略？" class="headerlink" title="18.Kafka 有几种数据保留的策略？"></a>18.Kafka 有几种数据保留的策略？</h4><p>答：Kafka 有两种数据保存策略：按照过期时间保留和按照存储的消息大小保留。</p>
<h4 id="19-Kafka-同时设置了-7-天和-10G-清除数据，到第五天的时候消息达到了-10G，这个时候-Kafka-将如何处理？"><a href="#19-Kafka-同时设置了-7-天和-10G-清除数据，到第五天的时候消息达到了-10G，这个时候-Kafka-将如何处理？" class="headerlink" title="19.Kafka 同时设置了 7 天和 10G 清除数据，到第五天的时候消息达到了 10G，这个时候 Kafka 将如何处理？"></a>19.Kafka 同时设置了 7 天和 10G 清除数据，到第五天的时候消息达到了 10G，这个时候 Kafka 将如何处理？</h4><p>答：这个时候 Kafka 会执行数据清除工作，时间和大小不论哪个满足条件，都会清空数据。</p>
<h4 id="20-什么情况会导致-Kafka-运行变慢？"><a href="#20-什么情况会导致-Kafka-运行变慢？" class="headerlink" title="20.什么情况会导致 Kafka 运行变慢？"></a>20.什么情况会导致 Kafka 运行变慢？</h4><p>答：以下情况可导致 Kafka 运行变慢：</p>
<ul>
<li>CPU 性能瓶颈</li>
<li>磁盘读写瓶颈</li>
<li>网络瓶颈</li>
</ul>
<h4 id="21-使用-Kafka-集群需要注意什么？"><a href="#21-使用-Kafka-集群需要注意什么？" class="headerlink" title="21.使用 Kafka 集群需要注意什么？"></a>21.使用 Kafka 集群需要注意什么？</h4><p>答：Kafka 集群使用需要注意以下事项：</p>
<ul>
<li>集群的数量不是越多越好，最好不要超过 7 个，因为节点越多，消息复制需要的时间就越长，整个群组的吞吐量就越低；</li>
<li>集群数量最好是单数，因为超过一半故障集群就不能用了，设置为单数容错率更高。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/04/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E9%9D%A2%E8%AF%95%E9%A2%98%E6%B1%87%E6%80%BB/" data-id="ckke5nr3z003ccl8g6gfmcbou" data-title="消息队列面试题" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mq/" rel="tag">mq</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ms/" rel="tag">ms</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-深入学习Spring Boot自动装配" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/12/04/%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0Spring%20Boot%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D/" class="article-date">
  <time class="dt-published" datetime="2020-12-04T02:10:17.000Z" itemprop="datePublished">2020-12-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/springboot/">springboot</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/12/04/%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0Spring%20Boot%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D/">深入学习springboot自动装配</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p>模式注解</p>
</blockquote>
<blockquote>
<p>@Enable模块驱动</p>
</blockquote>
<blockquote>
<p>自动装配</p>
</blockquote>
<h2 id="模式注解"><a href="#模式注解" class="headerlink" title="模式注解"></a>模式注解</h2><p>Stereotype Annotation俗称为模式注解，Spring中常见的模式注解有<code>@Service</code>，<code>@Repository</code>，<code>@Controller</code>等，它们都“派生”自<code>@Component</code>注解。我们都知道，凡是被<code>@Component</code>标注的类都会被Spring扫描并纳入到IOC容器中，那么由<code>@Component</code>派生的注解所标注的类也会被扫描到IOC容器中。下面我们主要通过自定义模式注解来了解<code>@Component</code>的“派生性”和“层次性”。</p>
<h3 id="Component-“派生性”"><a href="#Component-“派生性”" class="headerlink" title="@Component “派生性”"></a>@Component “派生性”</h3><p>新建一个Spring Boot工程，Spring Boot版本为2.1.0.RELEASE，<code>artifactId</code>为autoconfig，并引入<code>spring-boot-starter-web</code>依赖。项目结构如下所示:</p>
<p><img src="https://mrbird.cc/img/QQ%E6%88%AA%E5%9B%BE20190220151447.png" alt="QQ截图20190220151447.png"></p>
<p>在<code>com.example.demo</code>下新建<code>annotation</code>包，然后创建一个<code>FirstLevelService</code>注解：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> FirstLevelService &#123;</span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> &quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个注解定义由<code>@Service</code>标注，查看<code>@Service</code>的源码会发现其被<code>@Component</code>注解标注，所以它们的层次关系为:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">└─@Component</span><br><span class="line">   └─@Service</span><br><span class="line">      └─@FirstLevelService</span><br></pre></td></tr></table></figure>


<p>即<code>@FirstLevelService</code>为<code>@Component</code>派生出来的模式注解，我们来测试一下被它标注的类是否能够被扫描到IOC容器中：</p>
<p>在<code>com.example.demo</code>下新建<code>service</code>包，然后创建一个<code>TestService</code>类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FirstLevelService</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestService</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>在<code>com.example.demo</code>下新建<code>bootstrap</code>包，然后创建一个<code>ServiceBootStrap</code>类，用于测试注册<code>TestService</code>并从IOC容器中获取它：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ComponentScan(&quot;com.example.demo.service&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServiceBootstrap</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ConfigurableApplicationContext context = <span class="keyword">new</span> SpringApplicationBuilder(ServiceBootstrap.class)</span><br><span class="line">                .web(WebApplicationType.NONE)</span><br><span class="line">                .run(args);</span><br><span class="line">        TestService testService = context.getBean(<span class="string">&quot;testService&quot;</span>, TestService.class);</span><br><span class="line">        System.out.println(<span class="string">&quot;TestService Bean: &quot;</span> + testService);</span><br><span class="line">        context.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>运行该类的main方法，控制台输出如下：</p>
<p><img src="https://mrbird.cc/img/QQ%E6%88%AA%E5%9B%BE20190220152939.png" alt="QQ截图20190220152939.png"></p>
<h3 id="Component-“层次性”"><a href="#Component-“层次性”" class="headerlink" title="@Component “层次性”"></a>@Component “层次性”</h3><p>我们在<code>com.example.demo.annotation</code>路径下再创建一个<code>SecondLevelService</code>注解定义，该注解由上面的<code>@FirstLevelService</code>标注：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@FirstLevelService</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SecondLevelService &#123;</span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> &quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>这时候层次关系为：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">└─@Component</span><br><span class="line">   └─@Service</span><br><span class="line">      └─@FirstLevelService</span><br><span class="line">            └─@SecondLevelService</span><br></pre></td></tr></table></figure>


<p>我们将<code>TestService</code>上的注解换成<code>@SecondLevelService</code>，然后再次运行<code>ServiceBootStrap</code>的main方法，输出如下：</p>
<p><img src="https://mrbird.cc/img/QQ%E6%88%AA%E5%9B%BE20190220152939.png" alt="QQ截图20190220152939.png"></p>
<p>可见结果也是成功的。</p>
<p>这里有一点需要注意的是：<code>@Component</code>注解只包含一个value属性定义，所以其“派生”的注解也只能包含一个value属性定义。</p>
<h2 id="Enable模块驱动"><a href="#Enable模块驱动" class="headerlink" title="@Enable模块驱动"></a>@Enable模块驱动</h2><p><code>@Enable</code>模块驱动在Spring Framework 3.1后开始支持。这里的模块通俗的来说就是一些为了实现某个功能的组件的集合。通过<code>@Enable</code>模块驱动，我们可以开启相应的模块功能。</p>
<p><code>@Enable</code>模块驱动可以分为“注解驱动”和“接口编程”两种实现方式，下面逐一进行演示：</p>
<h3 id="注解驱动"><a href="#注解驱动" class="headerlink" title="注解驱动"></a>注解驱动</h3><p>Spring中，基于注解驱动的示例可以查看<code>@EnableWebMvc</code>源码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Import(&#123;DelegatingWebMvcConfiguration.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EnableWebMvc &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>该注解通过<code>@Import</code>导入一个配置类<code>DelegatingWebMvcConfiguration</code>：</p>
<p><img src="https://mrbird.cc/img/QQ%E6%88%AA%E5%9B%BE20190220170120.png" alt="QQ截图20190220170120.png"></p>
<p>该配置类又继承自<code>WebMvcConfigurationSupport</code>，里面定义了一些Bean的声明。</p>
<p>所以，基于注解驱动的<code>@Enable</code>模块驱动其实就是通过<code>@Import</code>来导入一个配置类，以此实现相应模块的组件注册，当这些组件注册到IOC容器中，这个模块对应的功能也就可以使用了。</p>
<p>我们来定义一个基于注解驱动的<code>@Enable</code>模块驱动。</p>
<p>在<code>com.example.demo</code>下新建<code>configuration</code>包，然后创建一个<code>HelloWorldConfiguration</code>配置类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorldConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>这个配置类里定义了一个名为<code>hello</code>的Bean，内容为<code>hello world</code>。</p>
<p>在<code>com.example.demo.annotation</code>下创建一个<code>EnableHelloWorld</code>注解定义：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Import(HelloWorldConfiguration.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EnableHelloWorld &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>我们在该注解类上通过<code>@Import</code>导入了刚刚创建的配置类。</p>
<p>接着在<code>com.example.demo.bootstrap</code>下创建一个<code>TestEnableBootstap</code>启动类来测试<code>@EnableHelloWorld</code>注解是否生效：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableHelloWorld</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestEnableBootstap</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ConfigurableApplicationContext context = <span class="keyword">new</span> SpringApplicationBuilder(TestEnableBootstap.class)</span><br><span class="line">                .web(WebApplicationType.NONE)</span><br><span class="line">                .run(args);</span><br><span class="line">        String hello = context.getBean(<span class="string">&quot;hello&quot;</span>, String.class);</span><br><span class="line">        System.out.println(<span class="string">&quot;hello Bean: &quot;</span> + hello);</span><br><span class="line">        context.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>运行该类的main方法，控制台输出如下：</p>
<p><img src="https://mrbird.cc/img/QQ%E6%88%AA%E5%9B%BE20190220171218.png" alt="QQ截图20190220171218.png"></p>
<p>说明我们自定义的基于注解驱动的<code>@EnableHelloWorld</code>是可行的。</p>
<h3 id="接口编程"><a href="#接口编程" class="headerlink" title="接口编程"></a>接口编程</h3><p>除了使用上面这个方式外，我们还可以通过接口编程的方式来实现<code>@Enable</code>模块驱动。Spring中，基于接口编程方式的有<code>@EnableCaching</code>注解，查看其源码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Import(&#123;CachingConfigurationSelector.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EnableCaching &#123;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">proxyTargetClass</span><span class="params">()</span> <span class="keyword">default</span> <span class="keyword">false</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">AdviceMode <span class="title">mode</span><span class="params">()</span> <span class="keyword">default</span> AdviceMode.PROXY</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">order</span><span class="params">()</span> <span class="keyword">default</span> 2147483647</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>EnableCaching</code>注解通过<code>@Import</code>导入了<code>CachingConfigurationSelector</code>类，该类间接实现了<code>ImportSelector</code>接口，在 <a target="_blank" rel="noopener" href="https://mrbird.cc/Spring-Bean-Regist.html">深入学习Spring组件注册</a> 中，我们曾介绍了可以通过<code>ImportSelector</code>来实现组件注册。</p>
<p>所以通过接口编程实现<code>@Enable</code>模块驱动的本质是：通过<code>@Import</code>来导入接口<code>ImportSelector</code>实现类，该实现类里可以定义需要注册到IOC容器中的组件，以此实现相应模块对应组件的注册。</p>
<p>接下来我们根据这个思路来自个实现一遍：</p>
<p>在<code>com.example.demo</code>下新建<code>selector</code>包，然后在该路径下新建一个<code>HelloWorldImportSelector</code>实现<code>ImportSelector</code>接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorldImportSelector</span> <span class="keyword">implements</span> <span class="title">ImportSelector</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String[] selectImports(AnnotationMetadata importingClassMetadata) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> String[]&#123;HelloWorldConfiguration.class.getName()&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>如果看不懂上面这段代码含义的朋友可以阅读<a target="_blank" rel="noopener" href="https://mrbird.cc/Spring-Bean-Regist.html">深入学习Spring组件注册</a>一文。</p>
<p>接着我们修改<code>EnableHelloWorld</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Import(HelloWorldImportSelector.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EnableHelloWorld &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>上面导入的是<code>HelloWorldImportSelector</code>，而非<code>HelloWorldConfiguration</code>。</p>
<p>再次运行<code>TestEnableBootstap</code>的main方法，你会发现输出是一样的。</p>
<h2 id="自动装配"><a href="#自动装配" class="headerlink" title="自动装配"></a>自动装配</h2><p>Spring Boot中的自动装配技术底层主要用到了下面这些技术:</p>
<ol>
<li>Spring 模式注解装配</li>
<li>Spring @Enable 模块装配</li>
<li>Spring 条件装配装（<a target="_blank" rel="noopener" href="https://mrbird.cc/Spring-Bean-Regist.html">深入学习Spring组件注册</a>中有介绍）</li>
<li>Spring 工厂加载机制</li>
</ol>
<p>Spring 工厂加载机制的实现类为<code>SpringFactoriesLoader</code>，查看其源码：</p>
<p><img src="https://mrbird.cc/img/QQ%E6%88%AA%E5%9B%BE20190221110551.png" alt="QQ截图20190221110551.png"></p>
<p>该类的方法会读取META-INF目录下的spring.factories配置文件，我们查看spring-boot-autoconfigure-2.1.0.RELEASE.jar下的该文件：</p>
<p><img src="https://mrbird.cc/img/QQ%E6%88%AA%E5%9B%BE20190221110753.png" alt="QQ截图20190221110753.png"></p>
<p><img src="https://mrbird.cc/img/QQ%E6%88%AA%E5%9B%BE20190221110907.png" alt="QQ截图20190221110907.png"></p>
<p>当启动类被<code>@EnableAutoConfiguration</code>标注后，上面截图中的所有类Spring都会去扫描，看是否可以纳入到IOC容器中进行管理。</p>
<p>比如我们查看<code>org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration</code>的源码：</p>
<p><img src="https://mrbird.cc/img/QQ%E6%88%AA%E5%9B%BE20190221111400.png" alt="QQ截图20190221111400.png"></p>
<p>可看到该类上标注了一些注解，其中<code>@Configuration</code>为模式注解，<code>@EnableConfigurationProperties</code>为模块装配技术，<code>ConditionalOnClass</code>为条件装配技术。这和我们上面列出的Spring Boot自动装配底层主要技术一致，所以我们可以根据这个思路来自定义一个自动装配实现。</p>
<p>新建一个配置类<code>HelloWorldAutoConfiguration</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableHelloWorld</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty(name = &quot;helloworld&quot;, havingValue = &quot;true&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorldAutoConfiguration</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>然后在resources目录下新建META-INF目录，并创建spring.factories文件：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Auto Configure</span></span><br><span class="line"><span class="meta">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span>=<span class="string">\</span></span><br><span class="line"><span class="attr">com.example.demo.configuration.HelloWorldAutoConfiguration</span></span><br></pre></td></tr></table></figure>
<p>接着在配置文件application.properties中添加<code>helloworld=true</code>配置</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">helloworld</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure>


<p>最后创建<code>EnableAutoConfigurationBootstrap</code>，测试下<code>HelloWorldAutoConfiguration</code>是否生效：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EnableAutoConfigurationBootstrap</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ConfigurableApplicationContext context = <span class="keyword">new</span> SpringApplicationBuilder(EnableAutoConfigurationBootstrap.class)</span><br><span class="line">                .web(WebApplicationType.NONE)</span><br><span class="line">                .run(args);</span><br><span class="line">        String hello = context.getBean(<span class="string">&quot;hello&quot;</span>, String.class);</span><br><span class="line">        System.out.println(<span class="string">&quot;hello Bean: &quot;</span> + hello);</span><br><span class="line">        context.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>运行该main方法，控制台输出如下：</p>
<p><img src="https://mrbird.cc/img/QQ%E6%88%AA%E5%9B%BE20190221112922.png" alt="QQ截图20190221112922.png"></p>
<p>说明我们自定义的自动装配已经成功了。</p>
<p>下面简要分析下代码的运行逻辑：</p>
<ol>
<li><p>Spring 的工厂加载机制会自动读取META-INF目录下spring.factories文件内容；</p>
</li>
<li><p>我们在spring.factories定义了：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span>=<span class="string">\</span></span><br><span class="line"><span class="attr">com.example.demo.configuration.HelloWorldAutoConfiguration</span></span><br></pre></td></tr></table></figure>
<p>我们在测试类上使用了<code>@EnableAutoConfiguration</code>注解标注，那么<code>HelloWorldAutoConfiguration</code>就会被Spring扫描，看是否符合要求，如果符合则纳入到IOC容器中；</p>
</li>
<li><p><code>HelloWorldAutoConfiguration</code>上的<code>@ConditionalOnProperty</code>的注解作用为：当配置文件中配置了<code>helloworld=true</code>（我们确实添加了这个配置，所以符合要求）则这个类符合扫描规则；<code>@EnableHelloWorld</code>注解是我们前面例子中自定义的模块驱动注解，其引入了hello这个Bean，所以IOC容器中便会存在hello这个Bean了；</p>
</li>
<li><p>通过上面的步骤，我们就可以通过上下文获取到hello这个Bean了。</p>
</li>
</ol>
<blockquote>
<p>源码链接： <a target="_blank" rel="noopener" href="https://github.com/wuyouzhuguli/SpringAll/tree/master/44.Spring-Boot-Autoconfiguration">https://github.com/wuyouzhuguli/SpringAll/tree/master/44.Spring-Boot-Autoconfiguration</a></p>
<p>FROM:<a target="_blank" rel="noopener" href="https://mrbird.cc/deepin-springboot-autoconfig.html">https://mrbird.cc/deepin-springboot-autoconfig.html</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/04/%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0Spring%20Boot%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D/" data-id="ckke5nr40003fcl8ga8ihhizq" data-title="深入学习springboot自动装配" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/springboot/" rel="tag">springboot</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D/" rel="tag">自动装配</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-监控Dubbo服务" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/12/04/%E7%9B%91%E6%8E%A7Dubbo%E6%9C%8D%E5%8A%A1/" class="article-date">
  <time class="dt-published" datetime="2020-12-04T02:10:17.000Z" itemprop="datePublished">2020-12-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/12/04/%E7%9B%91%E6%8E%A7Dubbo%E6%9C%8D%E5%8A%A1/">监控dubbo服务</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Dubbo给我们提供了dubbo-admin和dubbo-monitor-simple用于监控Dubbo服务，可以用来监控接口暴露，注册情况，也可以显示接口的调用明细和调用时间。dubbo-admin和dubbo-monitor-simple的下载地址为：<a target="_blank" rel="noopener" href="https://github.com/apache/incubator-dubbo-admin/tree/master%EF%BC%8C%E8%BF%99%E9%87%8C%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D%E5%AE%83%E4%BB%AC%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E3%80%82">https://github.com/apache/incubator-dubbo-admin/tree/master，这里简单介绍它们如何使用。</a></p>
<h2 id="1-准备"><a href="#1-准备" class="headerlink" title="1.准备"></a>1.准备</h2><p>要监控Dubbo服务，首先我们必须在Dubbo应用上提供连接监控中心的配置，Dubbo支持两种方式：</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">对应URL参数</th>
<th align="left">类型</th>
<th align="left">是否必填</th>
<th align="left">缺省值</th>
<th align="left">作用</th>
<th align="left">描述</th>
<th align="left">兼容性</th>
</tr>
</thead>
<tbody><tr>
<td align="left">protocol</td>
<td align="left">protocol</td>
<td align="left">string</td>
<td align="left">可选</td>
<td align="left">dubbo</td>
<td align="left">服务治理</td>
<td align="left">监控中心协议，如果为protocol=”registry”， 表示从注册中心发现监控中心地址， 否则直连监控中心。</td>
<td align="left">2.0.9以上版本</td>
</tr>
<tr>
<td align="left">address</td>
<td align="left"><url></td>
<td align="left">string</td>
<td align="left">可选</td>
<td align="left">N/A</td>
<td align="left">服务治理</td>
<td align="left">直连监控中心服务器地址，address=”10.20.130.230:12080”</td>
<td align="left">1.0.16以上版本</td>
</tr>
</tbody></table>
<p>这里我们采用第一种方式，在上一节中的server-provider和server-consumer的配置文件中添加如下配置:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dubbo:</span></span><br><span class="line">  <span class="attr">monitor:</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">registry</span></span><br></pre></td></tr></table></figure>


<p>配置好后，依次启动server-provider和server-consumer，接下来开始搭建监控中心。</p>
<h2 id="2-dubbo-monitor-simple"><a href="#2-dubbo-monitor-simple" class="headerlink" title="2.dubbo-monitor-simple"></a>2.dubbo-monitor-simple</h2><p>下载<a target="_blank" rel="noopener" href="https://github.com/apache/incubator-dubbo-admin/tree/master%E6%BA%90%E7%A0%81%E5%90%8E%EF%BC%8C%E4%BD%BF%E7%94%A8IDEA%E5%AF%BC%E5%85%A5dubbo-monitor-simple%E5%BA%94%E7%94%A8%EF%BC%8C%E4%BF%AE%E6%94%B9%E5%85%B6%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6dubbo.properties%E5%86%85%E5%AE%B9%EF%BC%9A">https://github.com/apache/incubator-dubbo-admin/tree/master源码后，使用IDEA导入dubbo-monitor-simple应用，修改其配置文件dubbo.properties内容：</a></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">dubbo.container</span>=<span class="string">log4j,spring,registry,jetty-monitor</span></span><br><span class="line"><span class="meta">dubbo.application.name</span>=<span class="string">simple-monitor</span></span><br><span class="line"><span class="meta">dubbo.application.owner</span>=<span class="string">dubbo</span></span><br><span class="line"><span class="meta">dubbo.registry.address</span>=<span class="string">zookeeper://127.0.0.1:2181</span></span><br><span class="line"><span class="meta">dubbo.protocol.port</span>=<span class="string">7070</span></span><br><span class="line"><span class="meta">dubbo.jetty.port</span>=<span class="string">7000</span></span><br><span class="line"><span class="meta">dubbo.jetty.directory</span>=<span class="string">$&#123;user.home&#125;/monitor</span></span><br><span class="line"><span class="meta">dubbo.charts.directory</span>=<span class="string">$&#123;user.home&#125;/monitor/charts</span></span><br><span class="line"><span class="meta">dubbo.statistics.directory</span>=<span class="string">$&#123;user.home&#125;/monitor/statistics</span></span><br><span class="line"><span class="meta">dubbo.log4j.file</span>=<span class="string">logs/dubbo-monitor-simple.log</span></span><br><span class="line"><span class="meta">dubbo.log4j.level</span>=<span class="string">WARN</span></span><br></pre></td></tr></table></figure>


<p>上面主要指定了注册中心地址为zookeeper://127.0.0.1:2181，监控中心协议端口为7070以及监控应用访问端口为7000。</p>
<p>配置好后，运行启动类<code>MonitorStarter</code>的main方法来启动应用，启动后，访问<a target="_blank" rel="noopener" href="http://localhost:7000/">http://localhost:7000</a>便可看到如下页面：</p>
<p><img src="http://59.110.212.214/upload/20200728_13291257.png"></p>
<p>在线应用信息:</p>
<p><img src="http://59.110.212.214/upload/20200728_13285730.png"></p>
<p>多次访问<a target="_blank" rel="noopener" href="http://localhost:8081/hello/mrbird%E5%90%8E%EF%BC%8C%E4%BE%BF%E5%8F%AF%E4%BB%A5%E5%9C%A8%E7%9B%91%E6%8E%A7%E4%B8%AD%E5%BF%83%E6%9F%A5%E7%9C%8B%E6%9C%8D%E5%8A%A1%E8%B0%83%E7%94%A8%E6%83%85%E5%86%B5%EF%BC%9A">http://localhost:8081/hello/mrbird后，便可以在监控中心查看服务调用情况：</a></p>
<p><img src="http://59.110.212.214/upload/20200728_13284593.png"></p>
<p><img src="http://59.110.212.214/upload/20200728_13283614.png"></p>
<h2 id="3-dubbo-admin"><a href="#3-dubbo-admin" class="headerlink" title="3.dubbo-admin"></a>3.dubbo-admin</h2><p>使用IDEA导入dubbo-admin应用，修改其配置文件application.properties：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">server.port</span>=<span class="string">7001</span></span><br><span class="line"><span class="meta">spring.velocity.cache</span>=<span class="string">false</span></span><br><span class="line"><span class="meta">spring.velocity.charset</span>=<span class="string">UTF-8</span></span><br><span class="line"><span class="meta">spring.velocity.layout-url</span>=<span class="string">/templates/default.vm</span></span><br><span class="line"><span class="meta">spring.messages.fallback-to-system-locale</span>=<span class="string">false</span></span><br><span class="line"><span class="meta">spring.messages.basename</span>=<span class="string">i18n/message</span></span><br><span class="line"><span class="meta">spring.root.password</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.guest.password</span>=<span class="string">guest</span></span><br><span class="line"></span><br><span class="line"><span class="meta">dubbo.registry.address</span>=<span class="string">zookeeper://127.0.0.1:2181</span></span><br></pre></td></tr></table></figure>


<p>上面配置主要配置了注册中心地址为zookeeper://127.0.0.1:2181，应用端口号为7001，root和guest账户的密码。</p>
<p>配置好后，启动应用（dubbo-admin使用Spring Boot构建，启动入口类即可），访问<a target="_blank" rel="noopener" href="http://localhost:7001/">http://localhost:7001</a>：</p>
<p><img src="http://59.110.212.214/upload/20200728_13281327.png"></p>
<p><img src="http://59.110.212.214/upload/20200728_13280472.png"></p>
<p><img src="http://59.110.212.214/upload/20200728_13275350.png"></p>
<p><img src="http://59.110.212.214/upload/20200728_13274153.png"></p>
<p>duubo提供了新版的dubbo-admin，采用前后端分离的方式，前端由Vue.js构建，UI更为nice，不过还不完善，所以这里就不介绍了。</p>
<p>源码链接：<a target="_blank" rel="noopener" href="https://github.com/wuyouzhuguli/SpringAll/tree/master/52.Dubbo-OPS-Mointor">https://github.com/wuyouzhuguli/SpringAll/tree/master/52.Dubbo-OPS-Mointor</a></p>
<ul>
<li><strong>本文作者：</strong> MrBird</li>
<li><strong>本文链接：</strong> <a target="_blank" rel="noopener" href="http://mrbird.cc/dubbo-mointor.html">http://mrbird.cc/dubbo-mointor.html</a></li>
<li><strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/04/%E7%9B%91%E6%8E%A7Dubbo%E6%9C%8D%E5%8A%A1/" data-id="ckke5nr41003icl8g70ob5p1k" data-title="监控dubbo服务" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dubbo/" rel="tag">dubbo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%9B%91%E6%8E%A7/" rel="tag">监控</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-线程池Executors" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/12/04/%E7%BA%BF%E7%A8%8B%E6%B1%A0Executors/" class="article-date">
  <time class="dt-published" datetime="2020-12-04T02:10:17.000Z" itemprop="datePublished">2020-12-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/12/04/%E7%BA%BF%E7%A8%8B%E6%B1%A0Executors/">线程池Executors</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>线程池的创建分为两种方式：ThreadPoolExecutor 和 Executors</p>
<h3 id="Executors可以创建以下6种线程池"><a href="#Executors可以创建以下6种线程池" class="headerlink" title="Executors可以创建以下6种线程池:"></a>Executors可以创建以下6种线程池:</h3><blockquote>
<ol>
<li>FixedThreadPool(n)：创建一个数量固定的线程池，超出的任务会在队列中等待空闲的线程，可用于控制程序的最大并发数。</li>
</ol>
</blockquote>
<blockquote>
<ol start="3">
<li>CachedThreadPool()：短时间内处理大量工作的线程池，会根据任务数量产生对应的线程，并试图缓存线程以便重复使用，如果限制 60 秒没被使用，则会被移除缓存。</li>
</ol>
</blockquote>
<blockquote>
<ol start="5">
<li>SingleThreadExecutor()：创建一个单线程线程池。</li>
</ol>
</blockquote>
<blockquote>
<ol start="7">
<li>ScheduledThreadPool(n)：创建一个数量固定的线程池，支持执行定时性或周期性任务。</li>
</ol>
</blockquote>
<blockquote>
<ol start="9">
<li>SingleThreadScheduledExecutor()：此线程池就是单线程的 newScheduledThreadPool。</li>
</ol>
</blockquote>
<blockquote>
<ol start="11">
<li>WorkStealingPool(n)：Java 8 新增创建线程池的方法，创建时如果不设置任何参数，则以当前机器处理器个数作为线程个数，此线程池会并行处理任务，不能保证执行顺序。</li>
</ol>
</blockquote>
<p>下面分别来看以上六种线程池的具体代码使用。</p>
<h3 id="1-FixedThreadPool-创建固定个数的线程池，具体示例如下："><a href="#1-FixedThreadPool-创建固定个数的线程池，具体示例如下：" class="headerlink" title="1.FixedThreadPool 创建固定个数的线程池，具体示例如下："></a>1.FixedThreadPool 创建固定个数的线程池，具体示例如下：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">ExecutorService fixedThreadPool = Executors.newFixedThreadPool(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">    fixedThreadPool.execute(() -&gt; &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;CurrentTime - &quot;</span> + LocalDateTime.now().format(DateTimeFormatter.ofPattern(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>)));</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//以上程序执行结果如下：</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// CurrentTime - 2019-06-27 20:58:58</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//CurrentTime - 2019-06-27 20:58:58</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// CurrentTime - 2019-06-27 20:58:59</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>根据执行结果可以看出，newFixedThreadPool(2) 确实是创建了两个线程，在执行了一轮（2 次）之后，停了一秒，有了空闲线程，才执行第三次。</p>
</blockquote>
<h3 id="2-CachedThreadPool-根据实际需要自动创建带缓存功能的线程池，具体代码如下："><a href="#2-CachedThreadPool-根据实际需要自动创建带缓存功能的线程池，具体代码如下：" class="headerlink" title="2.CachedThreadPool 根据实际需要自动创建带缓存功能的线程池，具体代码如下："></a>2.CachedThreadPool 根据实际需要自动创建带缓存功能的线程池，具体代码如下：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">ExecutorService cachedThreadPool = Executors.newCachedThreadPool();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    cachedThreadPool.execute(() -&gt; &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;CurrentTime - &quot;</span> +</span><br><span class="line">                           LocalDateTime.now().format(DateTimeFormatter.ofPattern(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>)));</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line">以上程序执行结果如下：</span><br><span class="line"></span><br><span class="line">        CurrentTime - <span class="number">2019</span>-<span class="number">06</span>-<span class="number">27</span> <span class="number">21</span>:<span class="number">24</span>:<span class="number">46</span></span><br><span class="line"></span><br><span class="line">        CurrentTime - <span class="number">2019</span>-<span class="number">06</span>-<span class="number">27</span> <span class="number">21</span>:<span class="number">24</span>:<span class="number">46</span></span><br><span class="line"></span><br><span class="line">        CurrentTime - <span class="number">2019</span>-<span class="number">06</span>-<span class="number">27</span> <span class="number">21</span>:<span class="number">24</span>:<span class="number">46</span></span><br><span class="line"></span><br><span class="line">        CurrentTime - <span class="number">2019</span>-<span class="number">06</span>-<span class="number">27</span> <span class="number">21</span>:<span class="number">24</span>:<span class="number">46</span></span><br><span class="line"></span><br><span class="line">        CurrentTime - <span class="number">2019</span>-<span class="number">06</span>-<span class="number">27</span> <span class="number">21</span>:<span class="number">24</span>:<span class="number">46</span></span><br><span class="line"></span><br><span class="line">        CurrentTime - <span class="number">2019</span>-<span class="number">06</span>-<span class="number">27</span> <span class="number">21</span>:<span class="number">24</span>:<span class="number">46</span></span><br><span class="line"></span><br><span class="line">        CurrentTime - <span class="number">2019</span>-<span class="number">06</span>-<span class="number">27</span> <span class="number">21</span>:<span class="number">24</span>:<span class="number">46</span></span><br><span class="line"></span><br><span class="line">        CurrentTime - <span class="number">2019</span>-<span class="number">06</span>-<span class="number">27</span> <span class="number">21</span>:<span class="number">24</span>:<span class="number">46</span></span><br><span class="line"></span><br><span class="line">        CurrentTime - <span class="number">2019</span>-<span class="number">06</span>-<span class="number">27</span> <span class="number">21</span>:<span class="number">24</span>:<span class="number">46</span></span><br><span class="line"></span><br><span class="line">        CurrentTime - <span class="number">2019</span>-<span class="number">06</span>-<span class="number">27</span> <span class="number">21</span>:<span class="number">24</span>:<span class="number">46</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>根据执行结果可以看出，newCachedThreadPool 在短时间内会创建多个线程来处理对应的任务，并试图把它们进行缓存以便重复使用。</p>
</blockquote>
<h3 id="3-SingleThreadExecutor-创建单个线程的线程池，具体代码如下："><a href="#3-SingleThreadExecutor-创建单个线程的线程池，具体代码如下：" class="headerlink" title="3.SingleThreadExecutor 创建单个线程的线程池，具体代码如下："></a>3.SingleThreadExecutor 创建单个线程的线程池，具体代码如下：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">ExecutorService singleThreadExecutor = Executors.newSingleThreadExecutor();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">    singleThreadExecutor.execute(() -&gt; &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;CurrentTime - &quot;</span> +</span><br><span class="line">                           LocalDateTime.now().format(DateTimeFormatter.ofPattern(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>)));</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//以上程序执行结果如下：</span></span><br><span class="line"></span><br><span class="line">        CurrentTime - <span class="number">2019</span>-<span class="number">06</span>-<span class="number">27</span> <span class="number">21</span>:<span class="number">43</span>:<span class="number">34</span></span><br><span class="line"></span><br><span class="line">        CurrentTime - <span class="number">2019</span>-<span class="number">06</span>-<span class="number">27</span> <span class="number">21</span>:<span class="number">43</span>:<span class="number">35</span></span><br><span class="line"></span><br><span class="line">        CurrentTime - <span class="number">2019</span>-<span class="number">06</span>-<span class="number">27</span> <span class="number">21</span>:<span class="number">43</span>:<span class="number">36</span></span><br></pre></td></tr></table></figure>

<h3 id="4-ScheduledThreadPool-创建一个可以执行周期性任务的线程池，具体代码如下："><a href="#4-ScheduledThreadPool-创建一个可以执行周期性任务的线程池，具体代码如下：" class="headerlink" title="4.ScheduledThreadPool 创建一个可以执行周期性任务的线程池，具体代码如下："></a>4.ScheduledThreadPool 创建一个可以执行周期性任务的线程池，具体代码如下：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ScheduledExecutorService scheduledThreadPool = Executors.newScheduledThreadPool(<span class="number">2</span>);</span><br><span class="line">scheduledThreadPool.schedule(() -&gt; &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;ThreadPool：&quot;</span> + LocalDateTime.now());</span><br><span class="line">&#125;, <span class="number">1L</span>, TimeUnit.SECONDS);</span><br><span class="line">System.out.println(<span class="string">&quot;CurrentTime：&quot;</span> + LocalDateTime.now());</span><br><span class="line"></span><br><span class="line"><span class="comment">//以上程序执行结果如下：</span></span><br><span class="line"></span><br><span class="line">    CurrentTime：<span class="number">2019</span>-<span class="number">06</span>-27T21:<span class="number">54</span>:<span class="number">21.881</span></span><br><span class="line"></span><br><span class="line">    ThreadPool：<span class="number">2019</span>-<span class="number">06</span>-27T21:<span class="number">54</span>:<span class="number">22.845</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>根据执行结果可以看出，我们设置的 1 秒后执行的任务生效了。</p>
</blockquote>
<h3 id="5-SingleThreadScheduledExecutor-创建一个可以执行周期性任务的单线程池，具体代码如下："><a href="#5-SingleThreadScheduledExecutor-创建一个可以执行周期性任务的单线程池，具体代码如下：" class="headerlink" title="5.SingleThreadScheduledExecutor 创建一个可以执行周期性任务的单线程池，具体代码如下："></a>5.SingleThreadScheduledExecutor 创建一个可以执行周期性任务的单线程池，具体代码如下：</h3><p>  ScheduledExecutorService singleThreadScheduledExecutor = Executors.newSingleThreadScheduledExecutor();<br>  singleThreadScheduledExecutor.schedule(() -&gt; {<br>      System.out.println(“ThreadPool：” + LocalDateTime.now());<br>  }, 1L, TimeUnit.SECONDS);<br>  System.out.println(“CurrentTime：” + LocalDateTime.now());</p>
<h3 id="6-WorkStealingPool-Java-8-新增的创建线程池的方式，可根据当前电脑-CPU-处理器数量生成相应个数的线程池，使用代码如下："><a href="#6-WorkStealingPool-Java-8-新增的创建线程池的方式，可根据当前电脑-CPU-处理器数量生成相应个数的线程池，使用代码如下：" class="headerlink" title="6.WorkStealingPool Java 8 新增的创建线程池的方式，可根据当前电脑 CPU 处理器数量生成相应个数的线程池，使用代码如下："></a>6.WorkStealingPool Java 8 新增的创建线程池的方式，可根据当前电脑 CPU 处理器数量生成相应个数的线程池，使用代码如下：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ExecutorService workStealingPool = </span><br><span class="line">    Executors.newWorkStealingPool();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">int</span> finalNumber = i;</span><br><span class="line">    workStealingPool.execute(() -&gt; &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;I：&quot;</span> + finalNumber);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line">Thread.sleep(<span class="number">5000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//以上程序执行结果如下：</span></span><br><span class="line"></span><br><span class="line">        I：<span class="number">0</span></span><br><span class="line"></span><br><span class="line">        I：<span class="number">3</span></span><br><span class="line"></span><br><span class="line">        I：<span class="number">2</span></span><br><span class="line"></span><br><span class="line">        I：<span class="number">1</span></span><br><span class="line"></span><br><span class="line">        I：<span class="number">4</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>根据执行结果可以看出，newWorkStealingPool 是并行处理任务的，并不能保证执行顺序。</p>
</blockquote>
<h2 id="ThreadPoolExecutor-VS-Executors"><a href="#ThreadPoolExecutor-VS-Executors" class="headerlink" title="ThreadPoolExecutor VS Executors"></a>ThreadPoolExecutor VS Executors</h2><ul>
<li>ThreadPoolExecutor 和 Executors 都是用来创建线程池的，其中 ThreadPoolExecutor 创建线程池的方式相对传统，而 Executors 提供了更多的线程池类型（6 种），但很不幸的消息是在实际开发中并不推荐使用 Executors 的方式来创建线程池。</li>
</ul>
<blockquote>
<p>《阿里巴巴 Java 开发手册》中对于线程池的创建也是这样规定的，内容如下：</p>
</blockquote>
<blockquote>
<p>线程池不允许使用 Executors 去创建，而是通过 ThreadPoolExecutor 的方式，这样的处理方式让写的读者更加明确线程池的运行规则，规避资源耗尽的风险。</p>
</blockquote>
<p>###说明：Executors 返回的线程池对象的弊端如下：</p>
<p>1）FixedThreadPool 和 SingleThreadPool:</p>
<blockquote>
<p>允许的请求队列长度为 Integer.MAX_VALUE，可能会堆积大量的请求，从而导致 OOM(OutOfMemoryError 的缩写，指内存溢出的意思)。</p>
</blockquote>
<p>2）CachedThreadPool 和 ScheduledThreadPool:</p>
<blockquote>
<p>允许的创建线程数量为 Integer.MAX_VALUE，可能会创建大量的线程，从而导致 OOM。</p>
</blockquote>
<p>举个栗子:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ExecutorService maxFixedThreadPool =  Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; Integer.MAX_VALUE; i++) &#123;</span><br><span class="line">    maxFixedThreadPool.execute(()-&gt;&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>之后设置 JVM（Java 虚拟机）的启动参数： -Xmx10m -Xms10m （设置 JVM 最大运行内存等于 10M）运行程序，会抛出 OOM 异常，信息如下：</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">&quot;main&quot;</span> java.lang.OutOfMemoryError: GC overhead limit exceeded</span><br><span class="line"></span><br><span class="line"> at java.util.concurrent.LinkedBlockingQueue.offer(LinkedBlockingQueue.java:<span class="number">416</span>)</span><br><span class="line"></span><br><span class="line"> at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:<span class="number">1371</span>)</span><br><span class="line"></span><br><span class="line"> at xxx.main(xxx.java:<span class="number">127</span>)</span><br></pre></td></tr></table></figure>
<p>为什么 Executors 会存在 OOM 的缺陷？</p>
<p>通过以上代码，找到了 FixedThreadPool 的源码，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title">newFixedThreadPool</span><span class="params">(<span class="keyword">int</span> nThreads)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ThreadPoolExecutor(nThreads, nThreads,</span><br><span class="line">                                      <span class="number">0L</span>, TimeUnit.MILLISECONDS,</span><br><span class="line">                                      <span class="keyword">new</span> LinkedBlockingQueue&lt;Runnable&gt;());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以看到创建 FixedThreadPool 使用了 LinkedBlockingQueue 作为任务队列，继续查看 LinkedBlockingQueue 的源码就会发现问题的根源，源码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">LinkedBlockingQueue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>(Integer.MAX_VALUE);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>当使用 LinkedBlockingQueue 并没有给它指定长度的时候，默认长度为 Integer.MAX_VALUE，这样就会导致程序会给线程池队列添加超多个任务，因为任务量太大就有造成 OOM 的风险。</strong></p>
<hr>
<h5 id="相关面试题"><a href="#相关面试题" class="headerlink" title="相关面试题"></a>相关面试题</h5><p>1.Executors 能创建单线程的线程池吗？怎么创建？</p>
<blockquote>
<p>答：Executors 可以创建单线程线程池，创建分为两种方式：</p>
</blockquote>
<blockquote>
<p>Executors.newSingleThreadExecutor()：创建一个单线程线程池。</p>
</blockquote>
<blockquote>
<p>Executors.newSingleThreadScheduledExecutor()：创建一个可以执行周期性任务的单线程池。</p>
</blockquote>
<p>2.Executors 中哪个线程适合执行短时间内大量任务？</p>
<blockquote>
<p>答：newCachedThreadPool() 适合处理大量短时间工作任务。它会试图缓存线程并重用，如果没有缓存任务就会新创建任务，如果线程的限制时间超过六十秒，则会被移除线程池，因此它比较适合短时间内处理大量任务。</p>
</blockquote>
<p>3.可以执行周期性任务的线程池都有哪些？</p>
<blockquote>
<p>答：可执行周期性任务的线程池有两个，分别是：newScheduledThreadPool() 和 newSingleThreadScheduledExecutor()，其中 newSingleThreadScheduledExecutor() 是 newScheduledThreadPool() 的单线程版本。</p>
</blockquote>
<p>4.JDK 8 新增了什么线程池？有什么特点？</p>
<blockquote>
<p>答：JDK 8 新增的线程池是 newWorkStealingPool(n)，如果不指定并发数（也就是不指定 n），newWorkStealingPool() 会根据当前 CPU 处理器数量生成相应个数的线程池。它的特点是并行处理任务的，不能保证任务的执行顺序。</p>
</blockquote>
<p>5.newFixedThreadPool 和 ThreadPoolExecutor 有什么关系？</p>
<blockquote>
<p>答：newFixedThreadPool 是 ThreadPoolExecutor 包装，newFixedThreadPool 底层也是通过 ThreadPoolExecutor 实现的。</p>
</blockquote>
<p>6.单线程的线程池存在的意义是什么？</p>
<blockquote>
<p>答：单线程线程池提供了队列功能，如果有多个任务会排队执行，可以保证任务执行的顺序性。单线程线程池也可以重复利用已有线程，减低系统创建和销毁线程的性能开销。</p>
</blockquote>
<p>7.线程池为什么建议使用 ThreadPoolExecutor 创建，而非 Executors？</p>
<blockquote>
<p>答：使用 ThreadPoolExecutor 能让开发者更加明确线程池的运行规则，避免资源耗尽的风险。</p>
</blockquote>
<blockquote>
<p>Executors 返回线程池的缺点如下：</p>
</blockquote>
<blockquote>
<p>FixedThreadPool 和 SingleThreadPool 允许请求队列长度为 Integer.MAX_VALUE，可能会堆积大量请求，可能会导致内存溢出；</p>
</blockquote>
<blockquote>
<p>CachedThreadPool 和 ScheduledThreadPool 允许创建线程数量为 Integer.MAX_VALUE，创建大量线程，可能会导致内存溢出。</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/04/%E7%BA%BF%E7%A8%8B%E6%B1%A0Executors/" data-id="ckke5nr42003lcl8g5nm0giqu" data-title="线程池Executors" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/executors/" rel="tag">executors</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BA%BF%E7%A8%8B%E6%B1%A0/" rel="tag">线程池</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/3/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/5/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/bug/">bug</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/db/">db</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hello-world/">hello world</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mac/">mac</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mele/">mele</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mq/">mq</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/springCloud/">springCloud</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/springboot/">springboot</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%B6%E4%BB%96/">其他</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7%E7%B1%BB/">工具类</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/">版本控制</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/acid/" rel="tag">acid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aop/" rel="tag">aop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/baby/" rel="tag">baby</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bug/" rel="tag">bug</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dubbo/" rel="tag">dubbo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/excel/" rel="tag">excel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/executors/" rel="tag">executors</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/explain/" rel="tag">explain</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/filter/" rel="tag">filter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/freemarker/" rel="tag">freemarker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/" rel="tag">html</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/httpServerletRequest/" rel="tag">httpServerletRequest</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/httpclient/" rel="tag">httpclient</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/idea/" rel="tag">idea</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/interceptor/" rel="tag">interceptor</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ioc/" rel="tag">ioc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ip/" rel="tag">ip</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java%E5%9F%BA%E7%A1%80/" rel="tag">java基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jdbcTemplate/" rel="tag">jdbcTemplate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jdk8-java/" rel="tag">jdk8 - java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/" rel="tag">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/json/" rel="tag">json</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mac/" rel="tag">mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/" rel="tag">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/" rel="tag">maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/md/" rel="tag">md</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mele/" rel="tag">mele</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mq/" rel="tag">mq</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ms/" rel="tag">ms</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mybatis/" rel="tag">mybatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oracle/" rel="tag">oracle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pagehelper-%E5%88%86%E9%A1%B5/" rel="tag">pagehelper - 分页</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/photo/" rel="tag">photo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rabbitmq-mq/" rel="tag">rabbitmq - mq</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/" rel="tag">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis-db/" rel="tag">redis - db</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/" rel="tag">spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springApplication/" rel="tag">springApplication</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springCloud/" rel="tag">springCloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springboot/" rel="tag">springboot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql%E4%BC%98%E5%8C%96/" rel="tag">sql优化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/stream/" rel="tag">stream</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/struts2/" rel="tag">struts2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swagger/" rel="tag">swagger</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/threadPollExecutor/" rel="tag">threadPollExecutor</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/thymeleaf/" rel="tag">thymeleaf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tomcat/" rel="tag">tomcat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tool/" rel="tag">tool</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/war/" rel="tag">war</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webservice/" rel="tag">webservice</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/word/" rel="tag">word</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xml/" rel="tag">xml</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%BB%E9%94%AE/" rel="tag">主键</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8B%E5%8A%A1/" rel="tag">事务</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BB%A3%E7%A0%81/" rel="tag">代码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%A5%E5%8F%A3%E7%B1%BB/" rel="tag">入口类</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%A5%E9%97%A8/" rel="tag">入门</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%AC%E9%92%A5/" rel="tag">公钥</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" rel="tag">分布式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E9%A1%B5/" rel="tag">分页</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" rel="tag">单元测试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%9F%E7%90%86/" rel="tag">原理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%91%BD%E4%BB%A4/" rel="tag">命令</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B-java/" rel="tag">多线程 - java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AF%BC%E5%87%BA/" rel="tag">导出</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7%E7%B1%BB/" rel="tag">工具类</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B8%B8%E7%94%A8/" rel="tag">常用</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%82%E5%B8%B8/" rel="tag">异常</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%82%E6%AD%A5%E8%B0%83%E7%94%A8/" rel="tag">异步调用</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%BD%E8%B1%A1%E7%B1%BB/" rel="tag">抽象类</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8B%A6%E6%88%AA%E5%99%A8/" rel="tag">拦截器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%A5%E5%8F%A3/" rel="tag">接口</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%BF%97/" rel="tag">日志</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A8%A1%E6%9D%BF/" rel="tag">模板</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B3%A8%E8%A7%A3/" rel="tag">注解</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B3%A8%E9%87%8A/" rel="tag">注释</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" rel="tag">消息队列</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%83%AD%E9%83%A8%E7%BD%B2/" rel="tag">热部署</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9B%91%E6%8E%A7/" rel="tag">监控</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0/" rel="tag">箭头函数</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BA%BF%E7%A8%8B%E6%B1%A0/" rel="tag">线程池</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%93%E5%AD%98/" rel="tag">缓存</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D/" rel="tag">自动装配</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%87%E6%BB%A4%E5%99%A8/" rel="tag">过滤器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%82%AE%E4%BB%B6/" rel="tag">邮件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9B%86%E5%90%88/" rel="tag">集合</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9B%AA%E8%8A%B1%E7%AE%97%E6%B3%95/" rel="tag">雪花算法</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/acid/" style="font-size: 11.67px;">acid</a> <a href="/tags/aop/" style="font-size: 10px;">aop</a> <a href="/tags/baby/" style="font-size: 10px;">baby</a> <a href="/tags/bug/" style="font-size: 11.67px;">bug</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/dubbo/" style="font-size: 10px;">dubbo</a> <a href="/tags/excel/" style="font-size: 10px;">excel</a> <a href="/tags/executors/" style="font-size: 10px;">executors</a> <a href="/tags/explain/" style="font-size: 10px;">explain</a> <a href="/tags/filter/" style="font-size: 10px;">filter</a> <a href="/tags/freemarker/" style="font-size: 10px;">freemarker</a> <a href="/tags/git/" style="font-size: 13.33px;">git</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/httpServerletRequest/" style="font-size: 10px;">httpServerletRequest</a> <a href="/tags/httpclient/" style="font-size: 10px;">httpclient</a> <a href="/tags/idea/" style="font-size: 10px;">idea</a> <a href="/tags/interceptor/" style="font-size: 10px;">interceptor</a> <a href="/tags/ioc/" style="font-size: 10px;">ioc</a> <a href="/tags/ip/" style="font-size: 10px;">ip</a> <a href="/tags/java/" style="font-size: 18.33px;">java</a> <a href="/tags/java%E5%9F%BA%E7%A1%80/" style="font-size: 11.67px;">java基础</a> <a href="/tags/jdbcTemplate/" style="font-size: 10px;">jdbcTemplate</a> <a href="/tags/jdk8-java/" style="font-size: 10px;">jdk8 - java</a> <a href="/tags/js/" style="font-size: 10px;">js</a> <a href="/tags/json/" style="font-size: 10px;">json</a> <a href="/tags/linux/" style="font-size: 13.33px;">linux</a> <a href="/tags/mac/" style="font-size: 10px;">mac</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/md/" style="font-size: 10px;">md</a> <a href="/tags/mele/" style="font-size: 10px;">mele</a> <a href="/tags/mq/" style="font-size: 11.67px;">mq</a> <a href="/tags/ms/" style="font-size: 11.67px;">ms</a> <a href="/tags/mybatis/" style="font-size: 15px;">mybatis</a> <a href="/tags/oracle/" style="font-size: 11.67px;">oracle</a> <a href="/tags/pagehelper-%E5%88%86%E9%A1%B5/" style="font-size: 10px;">pagehelper - 分页</a> <a href="/tags/photo/" style="font-size: 10px;">photo</a> <a href="/tags/rabbitmq-mq/" style="font-size: 10px;">rabbitmq - mq</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/redis-db/" style="font-size: 10px;">redis - db</a> <a href="/tags/spring/" style="font-size: 11.67px;">spring</a> <a href="/tags/springApplication/" style="font-size: 10px;">springApplication</a> <a href="/tags/springCloud/" style="font-size: 11.67px;">springCloud</a> <a href="/tags/springboot/" style="font-size: 20px;">springboot</a> <a href="/tags/sql%E4%BC%98%E5%8C%96/" style="font-size: 10px;">sql优化</a> <a href="/tags/stream/" style="font-size: 10px;">stream</a> <a href="/tags/struts2/" style="font-size: 10px;">struts2</a> <a href="/tags/swagger/" style="font-size: 10px;">swagger</a> <a href="/tags/threadPollExecutor/" style="font-size: 10px;">threadPollExecutor</a> <a href="/tags/thymeleaf/" style="font-size: 10px;">thymeleaf</a> <a href="/tags/tomcat/" style="font-size: 11.67px;">tomcat</a> <a href="/tags/tool/" style="font-size: 13.33px;">tool</a> <a href="/tags/war/" style="font-size: 10px;">war</a> <a href="/tags/webservice/" style="font-size: 10px;">webservice</a> <a href="/tags/word/" style="font-size: 10px;">word</a> <a href="/tags/xml/" style="font-size: 11.67px;">xml</a> <a href="/tags/%E4%B8%BB%E9%94%AE/" style="font-size: 10px;">主键</a> <a href="/tags/%E4%BA%8B%E5%8A%A1/" style="font-size: 11.67px;">事务</a> <a href="/tags/%E4%BB%A3%E7%A0%81/" style="font-size: 10px;">代码</a> <a href="/tags/%E5%85%A5%E5%8F%A3%E7%B1%BB/" style="font-size: 10px;">入口类</a> <a href="/tags/%E5%85%A5%E9%97%A8/" style="font-size: 11.67px;">入门</a> <a href="/tags/%E5%85%AC%E9%92%A5/" style="font-size: 10px;">公钥</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 11.67px;">分布式</a> <a href="/tags/%E5%88%86%E9%A1%B5/" style="font-size: 10px;">分页</a> <a href="/tags/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" style="font-size: 10px;">单元测试</a> <a href="/tags/%E5%8E%9F%E7%90%86/" style="font-size: 10px;">原理</a> <a href="/tags/%E5%91%BD%E4%BB%A4/" style="font-size: 10px;">命令</a> <a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B-java/" style="font-size: 10px;">多线程 - java</a> <a href="/tags/%E5%AF%BC%E5%87%BA/" style="font-size: 10px;">导出</a> <a href="/tags/%E5%B7%A5%E5%85%B7%E7%B1%BB/" style="font-size: 16.67px;">工具类</a> <a href="/tags/%E5%B8%B8%E7%94%A8/" style="font-size: 10px;">常用</a> <a href="/tags/%E5%BC%82%E5%B8%B8/" style="font-size: 10px;">异常</a> <a href="/tags/%E5%BC%82%E6%AD%A5%E8%B0%83%E7%94%A8/" style="font-size: 10px;">异步调用</a> <a href="/tags/%E6%8A%BD%E8%B1%A1%E7%B1%BB/" style="font-size: 10px;">抽象类</a> <a href="/tags/%E6%8B%A6%E6%88%AA%E5%99%A8/" style="font-size: 10px;">拦截器</a> <a href="/tags/%E6%8E%A5%E5%8F%A3/" style="font-size: 10px;">接口</a> <a href="/tags/%E6%97%A5%E5%BF%97/" style="font-size: 11.67px;">日志</a> <a href="/tags/%E6%A8%A1%E6%9D%BF/" style="font-size: 10px;">模板</a> <a href="/tags/%E6%B3%A8%E8%A7%A3/" style="font-size: 10px;">注解</a> <a href="/tags/%E6%B3%A8%E9%87%8A/" style="font-size: 10px;">注释</a> <a href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" style="font-size: 10px;">消息队列</a> <a href="/tags/%E7%83%AD%E9%83%A8%E7%BD%B2/" style="font-size: 10px;">热部署</a> <a href="/tags/%E7%9B%91%E6%8E%A7/" style="font-size: 10px;">监控</a> <a href="/tags/%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0/" style="font-size: 10px;">箭头函数</a> <a href="/tags/%E7%BA%BF%E7%A8%8B%E6%B1%A0/" style="font-size: 11.67px;">线程池</a> <a href="/tags/%E7%BC%93%E5%AD%98/" style="font-size: 10px;">缓存</a> <a href="/tags/%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D/" style="font-size: 10px;">自动装配</a> <a href="/tags/%E8%BF%87%E6%BB%A4%E5%99%A8/" style="font-size: 10px;">过滤器</a> <a href="/tags/%E9%82%AE%E4%BB%B6/" style="font-size: 10px;">邮件</a> <a href="/tags/%E9%9B%86%E5%90%88/" style="font-size: 10px;">集合</a> <a href="/tags/%E9%9B%AA%E8%8A%B1%E7%AE%97%E6%B3%95/" style="font-size: 10px;">雪花算法</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/01/23/redis%E6%95%99%E7%A8%8B%E6%95%88%E7%8E%87%E7%89%88/">redis入门效率版</a>
          </li>
        
          <li>
            <a href="/2021/01/22/%E5%BC%80%E5%8F%91%E6%B3%A8%E6%84%8F%E4%BB%A3%E7%A0%81%E6%95%B4%E7%90%86/">开发中注意的小问题</a>
          </li>
        
          <li>
            <a href="/2021/01/02/SQL%E8%AF%AD%E5%8F%A5%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87/">SQL语句性能提升</a>
          </li>
        
          <li>
            <a href="/2020/12/15/%E9%9B%86%E5%90%88%E5%88%86%E9%A1%B5%E5%B7%A5%E5%85%B7%E7%B1%BB/">集合分页工具类</a>
          </li>
        
          <li>
            <a href="/2020/12/10/%E5%8F%AA%E4%BF%AE%E6%94%B9%E5%87%A0%E8%A1%8C%EF%BC%8Cgit%E5%8D%B4%E6%98%BE%E7%A4%BA%E6%95%B4%E4%B8%AA%E6%96%87%E4%BB%B6%E9%83%BD%E8%A2%AB%E4%BF%AE%E6%94%B9/">只修改几行，git却显示整个文件都被修改</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>